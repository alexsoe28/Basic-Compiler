%!PS-Adobe-3.0
%%Creator: groff version 1.22.2
%%CreationDate: Wed Nov 21 15:07:20 2018
%%Title: asg4-symbols-types.ps
%%BoundingBox: 0 0 612 792
%%DocumentNeededResources: font Courier
%%+ font Courier-Bold
%%+ font NewCenturySchlbk-Bold
%%+ font NewCenturySchlbk-Roman
%%+ font NewCenturySchlbk-Italic
%%+ font Symbol
%%+ font Times-Roman
%%DocumentSuppliedResources: procset grops 1.22 2
%%+ font Courier-Elite-Bold
%%+ font Courier-Elite
%%Pages: 8
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.22 2
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Courier
%%IncludeResource: font Courier-Bold
%%IncludeResource: font NewCenturySchlbk-Bold
%%IncludeResource: font NewCenturySchlbk-Roman
%%IncludeResource: font NewCenturySchlbk-Italic
%%IncludeResource: font Symbol
%%IncludeResource: font Times-Roman
%%BeginResource: font Courier-Elite-Bold
%%DocumentNeededResources: font Courier-Bold
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Courier-Elite-Bold
[ .833333333 0 0 1 0 0 ]
/Courier-Bold
MakeTransformedFont
%%EndResource
%%BeginResource: font Courier-Elite
%%DocumentNeededResources: font Courier
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Courier-Elite
[ .833333333 0 0 1 0 0 ]
/Courier
MakeTransformedFont
%%EndResource
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE/NewCenturySchlbk-Italic@0 ENC0
/NewCenturySchlbk-Italic RE/Courier-Elite-Bold@0 ENC0/Courier-Elite-Bold
RE/Courier-Elite@0 ENC0/Courier-Elite RE/NewCenturySchlbk-Roman@0 ENC0
/NewCenturySchlbk-Roman RE/NewCenturySchlbk-Bold@0 ENC0
/NewCenturySchlbk-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(1o)36.96 G 3.336(f8)-3.336 G/F2 11
/Courier-Elite@0 SF
($Id: asg4-symbols-types.mm,v 1.31 2018-11-21 15:07:20-08 - - $)72 67 Q
(PWD: /afs/cats.ucsc.edu/courses/cmps104a-wm/Assignments)72 80 Q
(URL: http://www2.ucsc.edu/courses/cmps104a-wm/:/Assignments/)72 93 Q F0
3.444(1. Overview)72 117 R F1 5.375(As)72 137 S 2.038(ymbol table maint\
ains all of the identi\214ers in a program so that they can be)-5.375 F
1.433(looked up when referenced.)72 151 R 1.434
(Every time a symbol de\214nition is found, it is entered)8.105 F 1.843
(into the symbol table)72 165 R 5.179(,a)-.216 G 1.843
(nd every time a reference is found, it is looked up in the)-5.179 F
.849(symbol table)72 179 R 7.521(.I)-.216 G 4.186(ta)-7.521 G .85
(lso maintains scope information, whic)-4.186 F 4.186(hd)-.084 G .85
(etermines from where a)-4.186 F(symbol ma)72 193 Q 3.336(yb)-.12 G
3.336(er)-3.336 G(eferenced.)-3.336 E .058
(Another important part of a compiler is the type c)72 213 R(hec)-.084 E
.058(king mec)-.084 F .058(hanism, whic)-.084 F 3.394(hi)-.084 G 3.394
(su)-3.394 G(sed)-3.394 E .117(to verify that operators and functions a\
re passed types of an appropriate nature and)72 227 R .288
(return results that are consistent.)72 241 R .288
(This is done by adding attributes to eac)6.96 F 3.624(hn)-.084 G .288
(ode of)-3.624 F(the AST)72 255 Q 3.336(,a)-1.5 G(lthough only dec)
-3.336 E(laration and expression nodes ha)-.084 E
(ve non-null attributes)-.12 E(.)-.3 E F0(SYNOPSIS)72 275 Q/F3 12
/Courier-Elite-Bold@0 SF(oc)102 289 Q F1([)5.336 E F3(-ly)A F1 5.336(][)
C F3(-@)-5.336 E/F4 12/NewCenturySchlbk-Italic@0 SF(\215ag)3.336 E F1 2
(...)2.432 G 8.672(][)-2 G F3(-D)-8.672 E F4(string)3.336 E F1(]).432 E
F4(program)5.336 E F3(.oc).012 E F1 1.698
(All of the requirements for all previous projects are inc)72 309 R
1.699(luded in this project.)-.084 F(The)8.371 E .919(semantic routines\
 of this project will be called after the parser has returned to the)72
323 R 1.845(main program.)72 337 R -.66(Fo)8.517 G 5.181(ra).66 G 1.845
(ny input \214le called)-5.181 F F4(program)5.181 E F3(.oc).012 E F1
1.845(generate a symbol table \214le)5.181 F(called)72 351 Q F4(program)
4.253 E F3(.sym)A F1 7.589(.I)C 4.253(na)-7.589 G .917(ddition, c)-4.253
F .916(hange the AST printing function from the previ-)-.084 F 1.674
(ous project so that it prints out all attributes in eac)72 365 R 5.01
(hn)-.084 G 1.674(ode on eac)-5.01 F 5.01(hl)-.084 G 1.674
(ine after the)-5.01 F .398
(information required in the previous project.)72 379 R(Thus)7.07 E
3.734(,t)-.3 G .398(he AST \214le for this project will)-3.734 F(ha)72
393 Q(ve more information in it than for the previous project.)-.12 E F0
3.444(2. Symbols)72 419 R(in)3.444 E F3(oc)3.444 E F1 1.044(Symbols in)
72 439 R F3(oc)4.381 E F1 1.045(are all identi\214ers)4.381 F 4.381(,s)
-.3 G 1.045(ince there is no possibility of user)-4.381 F 1.045
(-overloading of)-.444 F(operators)72 453 Q 6.695(.T)-.3 G .023
(he symbol table module in)-6.695 F F3(oc)3.359 E F1 .023
(must maintain multiple symbol tables)3.359 F 3.359(,f)-.3 G(or)-3.359 E
.374(function and variable names)72 467 R 3.711(,f)-.3 G .375
(or type names)-3.711 F 3.711(,a)-.3 G .375
(nd for \214elds of structures)-3.711 F 7.047(.T)-.3 G .375(here are)
-7.047 F(three c)72 481 Q(lasses of identi\214ers)-.084 E(:)2 E(\(a\))
75.336 501 Q F0 .415(Type names)6 F(:)2 E F1 .414
(Type names consist of the reserved words)7.087 F F3(void)3.75 E F1(,)A
F3(int)3.75 E F1(,)A F3(string)3.75 E F1 3.75(,a)C(nd)-3.75 E 1.172
(identi\214er names de\214ned via)96 515 R F3(struct)4.509 E F1
(de\214nitions)4.509 E 7.845(.A)-.3 G 1.173
(ll type names are global and)-7.845 F .191
(exist in a name space separate from those of ordinary identi\214ers)96
529 R 3.527(,s)-.3 G 3.527(ot)-3.527 G .191(ype identi-)-3.527 F
(\214ers are entered into the type name table)96 543 Q(.)-.216 E(\(b\))
75.336 563 Q F0 -.216(Fi)6 G 2.075(eld names).216 F(:)2 E F1 -.12(Fi)
8.747 G 2.075(eld names are identi\214ers whic).12 F 5.411(hm)-.084 G
2.315 -.12(ay o)-5.411 H 2.076(nly be used immedi-).12 F .756
(ately following the arrow \()96 577 R F3(->)A F1 4.092(\)o)C .756
(perator for \214eld selection.)-4.092 F .756(The same \214eld name)
7.428 F(ma)96 591 Q 4.732(yb)-.12 G 4.732(eu)-4.732 G 1.396
(sed in different)-4.732 F F3(struct)4.732 E F1 1.396
(de\214nitions without con\215ict, and hence are all)4.732 F 3.41
(global. Eac)96 605 R(h)-.084 E F3(struct)3.41 E F1 .074
(de\214nition causes a separate \214eld symbol table to be created)3.41
F(and accessed from the type name table)96 619 Q(.)-.216 E(\(c\))76.68
639 Q F0 3.344(Function and variable names)6 F(:)2 E F1 3.345
(All function and variable identi\214ers are)10.016 F 1.507
(entered into the identi\214er symbol tables)96 653 R 8.179(.A)-.3 G
1.506(ll functions ha)-8.179 F 1.506(ve global scope)-.12 F 4.842(,b)
-.216 G(ut)-4.842 E 1.488(variables ma)96 667 R 4.824(yh)-.12 G -.12(av)
-4.824 G 4.824(eg).12 G 1.488(lobal or local scope)-4.824 F 8.16(.A)
-.216 G 1.488(variable dec)-3.336 F 1.488(lared in a local scope)-.084 F
1.71(hides an identi\214er in the global scope)96 681 R 8.382(.V)-.216 G
1.71(ariables in disjoint scopes ma)-9.402 F 5.046(yh)-.12 G -.12(av)
-5.046 G(e).12 E(the same name)96 695 Q(.)-.216 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(2o)36.96 G 3.336(f8)-3.336 G F0 3.444
(2.1 Categories)72 74 R(and types in)3.444 E/F2 12/Courier-Elite-Bold@0
SF(oc)3.444 E F1 1.692(There are three categories of types in)72 94 R F2
(oc)5.028 E F1 5.028(,a)C 1.692(nd eac)-5.028 F 5.028(hh)-.084 G 1.692
(as groups of types within it.)-5.028 F(Eac)72 108 Q 4.764(hi)-.084 G
1.427(denti\214er and \214eld has a particular type associated with it,\
 and eac)-4.764 F(h)-.084 E F2(struct)4.763 E F1 .183
(de\214nes a new type by name)72 122 R 6.855(.T)-.216 G .183(ype c)
-6.855 F(hec)-.084 E .184
(king of functions is done by structural equiv-)-.084 F(alence but c)72
136 Q(hec)-.084 E(king of variables is done via name equivalence)-.084 E
(.)-.216 E 2.664(\(a\) The)75.336 156 R
(void type is neither primitive nor reference)3.336 E(.)-.216 E(\(i\))
102.228 176 Q F2(void)6 E F1 7.761(:m)2 G 1.329 -.12(ay o)-7.761 H 1.089
(nly be used as the return type of a function.).12 F 1.088
(It is an error to)7.76 F(dec)120 190 Q(lare variables)-.084 E 3.336(,p)
-.3 G(arameters)-3.336 E 3.336(,o)-.3 G 3.336<728c>-3.336 G
(elds of this type)-3.336 E(.)-.216 E 2.664(\(b\) Primitive)75.336 210 R
1.551(types are represented inline inside)4.887 F F2(struct)4.887 E F1
4.887(sa)C 1.552(nd local or global vari-)-4.887 F(ables)96 224 Q 4.93
(,a)-.3 G 1.594(nd whose values disappear when the bloc)-4.93 F 4.93(kc)
-.084 G 1.594(ontaining them lea)-4.93 F 1.593(ves its)-.12 F(scope)96
238 Q 3.336(,o)-.216 G 3.336(rt)-3.336 G(he)-3.336 E F2(struct)3.336 E
F1(containing them becomes unreac)3.336 E(hable)-.084 E(.)-.216 E(\(i\))
102.228 258 Q F2(int)6 E F1 6.672(:i)2 G 3.336(sas)-6.672 G(igned two')
-3.336 E 3.336(sc)-.3 G(omplement integer)-3.336 E(.)-1.2 E 2.664
(\(c\) Reference)76.68 278 R 1.414
(types are pointers to objects on the heap)4.75 F 8.086(.T)-.216 G 1.414
(hey themselves ma)-8.086 F 4.75(yb)-.12 G(e)-4.75 E .601
(local, global, or \214elds)96 292 R 3.937(,a)-.3 G 3.937(sm)-3.937 G
.841 -.12(ay p)-3.937 H .601(rimitive types).12 F 3.937(,b)-.3 G .601
(ut all object types reside on the)-3.937 F(heap)96 306 Q 6.672(.P)-.216
G(ointer arithmetic is prohibited.)-7.116 E(\(i\))102.228 326 Q F2(null)
6 E F1 6.797(:h)2 G .125(as the single constant)-6.797 F F2(null)3.461 E
F1 6.797(.T)C .126(he syntax prevents it from being used)-6.797 F
(in a type dec)120 340 Q(laration.)-.084 E(\(ii\))98.448 360 Q F2
(string)6 E F1 6.931(:i)2 G 3.595(se)-6.931 G .259(ffectivly an arra)
-3.595 F 3.595(yo)-.12 G 3.595(fc)-3.595 G .259
(haracters and has string constants associ-)-3.679 F .678(ated with it.)
120 374 R .679(Its size is \214xed when allocated.)7.351 F .679
(The length of the string con-)7.351 F .855(tained in the arra)120 388 R
4.19(yv)-.12 G .854(aries up to the maximum allocated length, depending)
-4.19 F .553(on where the null plug \()120 402 R F2('\\0')A F1 3.89(\)i)
C 3.89(sp)-3.89 G 3.89(laced. Strings)-3.89 F .554
(are stored in the same for)3.89 F(-)-.444 E(mat as in C)120 416 Q(.)
-.444 E(\(iii\))96 436 Q F2(struct)4.668 E/F3 12
/NewCenturySchlbk-Italic@0 SF(typeid)3.766 E F1 7.102(:m)2.288 G .67
-.12(ay h)-7.102 H -.12(av).12 G 3.766(ea).12 G 3.766(sm)-3.766 G .43
(any \214elds as needed inside of it.)-3.766 F .429(It ma)7.101 F 3.765
(yc)-.12 G(on-)-3.765 E(tain both primitive and reference types)120 450
Q(.)-.3 E(\(iv\))96 470 Q F3(base)5.784 E F2([])A F1 6.818(:c)2 G .146
(ontains a collection of other elements)-6.818 F 3.482(,a)-.3 G .146
(ll of whic)-3.482 F 3.482(ha)-.084 G .147(re of the same)-3.482 F(type)
120 484 Q 4.403(,w)-.216 G(hic)-4.403 E 4.403(hm)-.084 G 1.307 -.12
(ay b)-4.403 H 4.403(ee).12 G 1.067(ither primitive or reference types)
-4.403 F 7.739(.I)-.3 G 1.067(ts base type ma)-7.739 F(y)-.12 E
(not be an arra)120 498 Q 3.336(yt)-.12 G(ype)-3.336 E 6.672(.T)-.216 G
(his is the only polymorphic type)-6.672 E(.)-.216 E F0 3.444
(2.2 Attributes)72 518 R(for types and properties)3.444 E F1(Eac)72 538
Q 4.188(hn)-.084 G .853
(ode in the AST has a set of attributes associated with it, as does eac)
-4.188 F 4.189(he)-.084 G(ntry)-4.189 E 2.345(in the symbol tables)72
552 R 9.017(.A)-.3 G 2.344
(ttributes indicate properties associated with parts of the)-9.017 F
.287(AST and are used for code generation.)72 566 R .287
(The attributes are gathered into several cat-)6.959 F -1.336(egories :)
72 580 R 2.664(\(a\) Type)75.336 600 R(attributes)5.826 E 5.826(,a)-.3 G
2.49(ll of whic)-5.826 F 5.826(ha)-.084 G 2.49(re mutually exc)-5.826 F
-1.336(lusive :)-.084 F F2(attr::VOID)9.161 E F1(,)A F2(attr::INT)5.825
E F1(,)A F2(attr::NULLX)96 614 Q F1(,)A F2(attr::STRING)3.628 E F1 3.628
(,a)C(nd)-3.628 E F2(attr::STRUCT)3.628 E F1 6.964(.I)C 3.628(ft)-6.964
G(he)-3.628 E F2(struct)3.628 E F1 .292(attribute is present,)3.628 F
.026(an associated typeid must also be present.)96 628 R(\()6.698 E F2
(NULL)A F1 .025(can not be used as an attribute)3.362 F
(because it is a macro in the library)96 642 Q(.\))-1.5 E 2.664
(\(b\) The)75.336 662 R F2(attr::ARRAY)6.133 E F1 2.797(attribute whic)
6.133 F 6.133(hm)-.084 G 3.037 -.12(ay o)-6.133 H 2.797
(ccur with any primitive or reference).12 F(type)96 676 Q 6.965(.A)-.216
G(rra)-6.965 E .293(ys of arra)-.12 F .292
(ys are not permitted, although arra)-.12 F .292(ys of)-.12 F F2(struct)
3.628 E F1 3.628(sc)C(ontaining)-3.628 E(arra)96 690 Q(ys are allowed.)
-.12 E 2.664(\(c\) Attributes)76.68 710 R 3.108(describing typeids)6.444
F 6.444(,i)-.3 G(denti\214ers)-6.444 E 6.444(,a)-.3 G 3.109
(nd \214elds are mutually exc)-6.444 F -1.336(lusive :)-.084 F F2
(attr::FUNCTION)96 724 Q F1(,)A F2(attr::VARIABLE)15.819 E F1(,)A F2
(attr::FIELD)15.819 E F1 15.818(,a)C(nd)-15.818 E F2(attr::TYPEID)15.818
E F1 19.154(.T)C(he)-19.154 E F2(attr::PARAM)96 738 Q F1 .273
(attribute is set if the variable is in a function')3.609 F 3.61(sp)-.3
G .274(arameter list.)-3.61 F(The)6.946 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(3o)36.96 G 3.336(f8)-3.336 G/F2 12
/Courier-Elite-Bold@0 SF(attr::LOCAL)96 74 Q F1
(attribute indicates local variables)3.336 E(.)-.3 E 2.664(\(d\) The)
75.12 94 R F2(attr::LVAL)3.869 E F1 .533
(attribute appears on any node in the AST whic)3.869 F 3.868(hc)-.084 G
.532(an receive an)-3.868 F 5.558(assignment. This)96 108 R(inc)5.558 E
2.222(ludes all variables \(global, local, or parameter\) and the)-.084
F(result of the indexing \()96 122 Q F2([])A F1 3.336(\)a)C
(nd selector \()-3.336 E F2(->)A F1 3.336(\)o)C(perators)-3.336 E(.)-.3
E 2.664(\(e\) The)76.008 142 R F2(attr::CONST)4.442 E F1 1.106
(attribute is set on all constants of type)4.442 F F2(int)4.442 E F1(,)A
F2(null)4.442 E F1 4.441(,a)C(nd)-4.441 E F2(string)4.441 E F1(.)A(The)
96 156 Q F2(lval)3.336 E F1(and)3.336 E F2(const)3.336 E F1
(attributes are mutually exc)3.336 E(lusive)-.084 E(.)-.216 E 2.664
(\(f\) The)78.012 176 R F2(attr::VREG)5.165 E F1 1.829
(attribute is set on interior nodes that hold a computed value)5.165 F
.923(and the)96 190 R F2(attr::VADDR)4.259 E F1 .923
(attribute on a computed address referring to a location in)4.259 F
(memory)96 204 Q 6.915(.T)-1.5 G .243(hey are mutually exc)-6.915 F
(lusive)-.084 E 6.916(.T)-.216 G .244
(hey represent virtual registers used in)-6.916 F(code generation.)96
218 Q .951(Attributes can be represented as an enumeration, with)72 238
R F2(attr::BITSET_SIZE)4.286 E F1 4.286(,t)C .95(he last)-4.286 F
(attribute)72 252 Q 3.336(,h)-.216 G -.12(av)-3.336 G
(ing the largest magnitude).12 E 6.672(.I)-.216 G(nc)-6.672 E(lude)-.084
E F2(<bitset>)3.336 E F1(.)A F2(enum class attr {)85.5 272 Q
(VOID, INT, NULLX, STRING, STRUCT, ARRAY, FUNCTION, VARIABLE, FIELD,)
109.5 286 Q
(TYPEID, PARAM, LOCAL, LVAL, CONST, VREG, VADDR, BITSET_SIZE,)109.5 300
Q(};)85.5 314 Q(using attr_bitset = bitset<attr::BITSET_SIZE>;)85.5 328
Q F0 3.444(2.3 P)72 348 R(olymorphism)-.66 E F1 -.444(Po)72 368 S 6.641
(lymorphism is present in many languages and derives from the Greek).444
F/F3 12/Symbol SF(polu)72 382 Q F1<b5>A F3(orfis)A F1<b5>A F3(o)A F1<b4>
-6.35 -1.05 M F3(V)2.354 1.05 M F1 3.336(,m)C(eaning `)-3.336 E(`ha)-.3
E(ving many forms')-.12 E('.)-.3 E 2.664(\(a\) Universal)75.336 402 R
-1.336(polymorphism :)3.336 F 2.664(\(i\) P)102.228 422 R 2.943
(arametric polymorphism \(universal\), implemented as generics in J)
-.444 F -.12(av)-.3 G(a,).12 E 1.984
(and as templates in C++, allows type parameters to be passed into data)
120 436 R(structures)120 450 Q 7.358(.I)-.3 G(n)-7.358 E F2(oc)4.022 E
F1 4.022(,o)C .685(nly arra)-4.022 F .685
(ys exhibit limited parametric polymorphism, in)-.12 F
(that there can be an arra)120 464 Q 3.336(yo)-.12 G 3.336(fa)-3.336 G
(ny other type except arra)-3.336 E(ys)-.12 E(.)-.3 E 2.664(\(ii\) Inc)
98.448 484 R 2.119(lusion polymorphism \(universal\), known also as inh\
eritance in object-)-.084 F(oriented programming lanugages)120 498 Q
3.336(,a)-.3 G(llows function overriding)-3.336 E 6.672(.N)-.3 G(one in)
-6.672 E F2(oc)3.336 E F1(.)A 2.664(\(b\) Ad)75.336 518 R
(hoc polymorphism)3.336 E(:)2 E 2.664(\(i\) Overloading)102.228 538 R
.065(polymorphism \(ad hoc\) means that the same function or opera-)
3.401 F 1.884(tor ma)120 552 R 5.221(yb)-.12 G 5.221(ed)-5.221 G 1.885
(e\214ned multiple times and selected based on the types of its)-5.221 F
(arguments)120 566 Q 9.078(.I)-.3 G(n)-9.078 E F2(oc)5.742 E F1 2.406
(operator overloading is permitted only for the assign-)5.742 F .343
(ment and comparison operators)120 580 R 3.679(,w)-.3 G(hic)-3.679 E
3.679(hc)-.084 G .343(an ha)-3.679 F .343(ve many types as arguments)
-.12 F(,)-.3 E .166(provided that they are compatible)120 594 R 3.502
(,a)-.216 G .166(nd for the indexing operator)-3.502 F 3.501(,w)-1.2 G
.165(hose left)-3.501 F 1.765(operand ma)120 608 R 5.101(yb)-.12 G 5.101
(ea)-5.101 G 5.101(na)-5.101 G(rra)-5.101 E 5.102(yo)-.12 G 5.102(fa)
-5.102 G 1.766(ny type)-5.102 F 5.102(,o)-.216 G 5.102(ras)-5.102 G
(tring)-5.102 E 8.438(.N)-.3 G 5.102(of)-8.438 G 1.766
(unctions or other)-5.102 F(operators are overloaded.)120 622 Q 2.664
(\(ii\) Conversion)98.448 642 R 2.11
(polymorphism \(ad hoc\) has arguments to functions implicitly)5.447 F
1.319(converted from one type to another in order to satisfy parameter \
passing)120 656 R(.)-.3 E(None in)120 670 Q F2(oc)3.336 E F1(.)A F0
3.444(2.4 Type)72 690 R(checking)3.444 E F1 .11(Type c)72 710 R(hec)
-.084 E .11(king involves a post-order depth-\214rst tra)-.084 F .11
(versal of the AST)-.12 F 6.782(.A)-1.5 G .11(detailed par)-3.336 F(-)
-.444 E 1.516(tial context-sensitive type c)72 724 R(hec)-.084 E 1.516
(king grammar is shown in F)-.084 F 1.517(igure 1.)-.12 F 1.517
(The following)8.189 F .752(names are used)72 738 R(:)2 E/F4 12
/NewCenturySchlbk-Italic@0 SF(primitive)7.424 E F1 .752
(is any primitive type)4.088 F(,)-.216 E F4(base)4.087 E F1 .751
(is any type that can be used)4.087 F 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(4o)36.96 G 3.336(f8)-3.336 G 540 71
72 71 DL(identdec)87 89 Q(l)-.084 E/F2 12/Times-Roman@0 SF(`)3 E/F3 12
/Courier-Elite-Bold@0 SF(=)A F2(')A/F4 12/NewCenturySchlbk-Italic@0 SF
(compatible)3 E/F5 12/Symbol SF<ae>3 E F2(`)87 103 Q F3(return)A F2(')A
F4(compatible)3 E F5<ae>3 E F4(any)87 117 Q F3(lval)3 E F2(`)3 E F3(=)A
F2(')A F4(any)3 E F5<ae>3 E F4(any)3 E F3(vreg)3 E F4(any)87 131 Q F2(`)
3 E F3(==)A F2(')A F4(any)3 E F5<ae>3 E F3 -3(int vreg)3 F F4(any)87 145
Q F2(`)3 E F3(!=)A F2(')A F4(any)3 E F5<ae>3 E F3 -3(int vreg)3 F F4
(any)87 159 Q F2(`)3 E F3(<)A F2(')A F4(any)3 E F5<ae>3 E F3 -3
(int vreg)3 F F4(any)87 173 Q F2(`)3 E F3(<=)A F2(')A F4(any)3 E F5<ae>3
E F3 -3(int vreg)3 F F4(any)87 187 Q F2(`)3 E F3(>)A F2(')A F4(any)3 E
F5<ae>3 E F3 -3(int vreg)3 F F4(any)87 201 Q F2(`)3 E F3(>=)A F2(')A F4
(any)3 E F5<ae>3 E F3 -3(int vreg)3 F(int)87 215 Q F2(`)3 E F3(+)A F2(')
A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F(int)87 229 Q F2(`)3 E F3<ad>A
F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F(int)87 243 Q F2(`)3 E F3
(*)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F(int)87 257 Q F2(`)3
E F3(/)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F(int)87 271 Q F2
(`)3 E F3(%)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F F2(`)324 89
Q F3(+)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F F2(`)324 103 Q
F3(-)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F F2(`)324 117 Q F3
(!)A F2(')A F3(int)3 E F5<ae>3 E F3 -3(int vreg)3 F F2(`)324 131 Q F3
(new)A F2(')A/F6 9/NewCenturySchlbk-Italic@0 SF(TYPEID)3 E F2(`)3 E F3
(\()A F2 3('`)C F3(\))-3 E F2(')A F5<ae>3 E F6(TYPEID)3 E F3(vreg)3 E F2
(`)324 145 Q F3(new)A F2 3('`)C F3(string)-3 E F2 3('`)C F3(\()-3 E F2
(')A F3(int)3 E F2(`)3 E F3(\))A F2(')A F5<ae>3 E F3 -3(string vreg)3 F
F2(`)324 159 Q F3(new)A F2(')A F4(base)3 E F2(`)3 E F3([)A F2(')A F3
(int)3 E F2(`)3 E F3(])A F2(')A F5<ae>3 E F4(base)3 E F3 -3([] vreg)B F6
(IDENT)324 173 Q F2(`)3 E F3(\()A F2(')A F4(compatible)3 E F2(`)3 E F3
(\))A F2(')A F5<ae>3 E F4(lookup)3 E F3(vreg)3 E F6(IDENT)324 187 Q F5
<ae>3 E F4(lookup)3 E(base)324 201 Q F3([])A F2(`)3 E F3([)A F2(')A F3
(int)3 E F2(`)3 E F3(])A F2(')A F5<ae>3 E F4(base)3 E F3 -3(vaddr lval)3
F F2(`)324 215 Q F3(string)A F2 3('`)C F3([)-3 E F2(')A F3(int)3 E F2(`)
3 E F3(])A F2(')A F5<ae>3 E F3 -3(int vaddr lval)3 F F6(IDENT)324 229 Q
F2(`)3 E F3(->)A F2(')A F6(FIELD)3 E F5<ae>3 E F4(lookup)3 E F3 -3
(vaddr lval)3 F F6(INTCON)324 243 Q F5<ae>3 E F3 -3(int const)3 F F6
(CHARCON)324 257 Q F5<ae>3 E F3 -3(int const)3 F F6(STRINGCON)324 271 Q
F5<ae>3 E F3 -3(string const)3 F F2(`)324 285 Q F3(null)A F2(')A F5<ae>3
E F3 -3(null const)3 F 540 290 72 290 DL 306 71 306 290 DL 540 71 540
290 DL 72 71 72 290 DL F0 -.216(Fi)199.05 305 S(gure 1.).216 E
(Type checking grammar)6.888 E F1(as a base type for an arra)72 333 Q 3
-1.5(y, a)-.12 H(nd)1.5 E F4(any)3.336 E F1
(is either primitive or reference)3.336 E(.)-.216 E 2.664(\(a\) Two)
75.336 353 R 1.478(types are)4.814 F F4(compatible)4.814 E F1 1.479
(if they are exactly the same type)4.814 F 8.151(;o)2 G 4.815(ri)-8.151
G 4.815(fo)-4.815 G 1.479(ne type is)-4.815 F .023
(any reference type and the other is)96 367 R F3(null)3.359 E F1 6.695
(.I)C 3.359(nt)-6.695 G .023(he type c)-3.359 F(hec)-.084 E .023
(king grammar)-.084 F 3.359(,i)-1.2 G 3.359(ne)-3.359 G(ac)-3.359 E(h)
-.084 E(rule)96 381 Q 6.758(,t)-.216 G 3.422
(ypes in italics must be substituted consistently by compatible types)
-6.758 F(.)-.3 E(Types are compatible only if the)96 395 Q F3(array)
3.336 E F1(attribute is on for both or off for both.)3.336 E 2.664
(\(b\) When)75.336 415 R .126(the right side of a production is empty)
3.462 F 3.462(,t)-1.5 G .126(here are no type attributes)-3.462 F 6.798
(.O)-.3 G(nly)-6.798 E(expressions ha)96 429 Q(ve type attributes)-.12 E
3.336(,n)-.3 G(ot statements)-3.336 E(.)-.3 E 2.664(\(c\) The)76.68 449
R(result type of assignment \()3.336 E F3(=)A F1 3.336(\)i)C 3.336(st)
-3.336 G(he type of its left operand.)-3.336 E 2.664(\(d\) F)75.12 469 R
.513(ields following a selector ha)-.12 F .513(ve the)-.12 F F3(field)
3.849 E F1(attribute)3.849 E 3.849(,b)-.216 G .513(ut no type attribute)
-3.849 F 3.849(,s)-.216 G(ince)-3.849 E
(their type depends on the structure from whic)96 483 Q 3.336(ht)-.084 G
(hey are selected.)-3.336 E 2.664(\(e\) Identi\214ers)76.008 503 R(ha)
4.23 E .894
(ve the type attributes that they derive from the symbol table)-.12 F
7.566(.I)-.216 G(n)-7.566 E .459(addition, either the)96 517 R F3
(function)3.795 E F1(or)3.795 E F3(variable)3.795 E F1 .459
(attribute will be present, and for vari-)3.795 F .618
(ables that are parameters)96 531 R 3.954(,a)-.3 G .618(lso the)-3.954 F
F3(param)3.954 E F1(attribute)3.954 E 7.29(.A)-.216 G .618
(ll variables also ha)-7.29 F .618(ve the)-.12 F F3(lval)96 545 Q F1
(attribute)3.336 E(.)-.216 E 2.664(\(f\) F)78.012 565 R .209
(ield selection sets the selector \()-.12 F F3(->)A F1 3.545(\)a)C .209
(ttribute as follows)-3.545 F 6.882(:T)2 G .21(he left operand must)
-6.882 F 2.041(be a)96 579 R F3(struct)5.377 E F1 2.041
(type or an error message is generated.)5.377 F 2.04
(Look up the \214eld in the)8.713 F 3.946
(structure and copy its type attributes to the selector)96 593 R 7.282
(,r)-1.2 G 3.946(emoving the)-7.282 F F3(field)7.282 E F1
(attribute and adding the)96 607 Q F3(vaddr)3.336 E F1(attribute)3.336 E
(.)-.216 E 2.664(\(g\) F)75.564 627 R 1.06(or a)-.66 F F3(call)4.396 E
F1 4.396(,e)C 1.059(valuate the types of eac)-4.396 F 4.395(ho)-.084 G
4.395(ft)-4.395 G 1.059(he arguments)-4.395 F 4.395(,a)-.3 G 1.059
(nd look up the func-)-4.395 F .179(tion in the identi\214er table)96
641 R 6.851(.T)-.216 G .179
(hen verify that the arguments are compatible with)-6.851 F .537(the pa\
rameters and error if not, or if the argument and parameter lists are n\
ot)96 655 R .589(of the same length.)96 669 R(The)7.261 E F3(call)3.925
E F1 .59(node has the result type of the function, with the)3.925 F F3
(vreg)96 683 Q F1(attribute)3.336 E(.)-.216 E 2.664(\(h\) The)74.676 703
R 1.484(expression operand of both)4.82 F F3(if)4.82 E F1(and)4.82 E F3
(while)4.82 E F1 1.483(is considered false if it is a)4.82 F F3(0)4.819
E F1(or)4.819 E F3(null)96 717 Q F1 6.672(.A)C
(ny non-zero primitive or non-null pointer is considered true)-6.672 E
(.)-.216 E 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(5o)36.96 G 3.336(f8)-3.336 G 2.664
(\(i\) If)78.228 74 R .574(the function')3.91 F 3.91(sr)-.3 G .574
(eturn type is not)-3.91 F/F2 12/Courier-Elite-Bold@0 SF(void)3.91 E F1
3.91(,t)C .574(hen it must ha)-3.91 F .575(ve an expression whic)-.12 F
(h)-.084 E 1.48(is compatible with the dec)96 88 R 1.48
(lared return type)-.084 F 8.151(.I)-.216 G 4.815(ti)-8.151 G 4.815(sa)
-4.815 G 4.815(ne)-4.815 G 1.479(rror for a)-4.815 F F2(return)4.815 E
F1(state-)4.815 E(ment to ha)96 102 Q(ve an operand if the function')
-.12 E 3.336(sr)-.3 G(eturn type is)-3.336 E F2(void)3.336 E F1(.)A
2.664(\(j\) The)78.456 122 R 1.227(indexing operator for an arra)4.563 F
4.564(yr)-.12 G 1.228(eturns the address of one of its elements)-4.564 F
(,)-.3 E .209(and for a string)96 136 R 3.545(,t)-.3 G .208
(he address of one of its c)-3.545 F(haracters)-.084 E 6.88(.W)-.3 G
.208(hen an)-6.88 F F2(int)3.544 E F1 .208(is stored in a)3.544 F F2
(string)96 150 Q F1 3.336(,o)C(nly the low-order 8 bits are stored.)
-3.336 E 540 169 72 169 DL F2(struct symbol {)78 180 Q/F3 12
/Times-Roman@0 SF 1.722(Each node in the symbol table must ha)264 180 R
2.082 -.18(ve i)-.24 H(nformation).18 E .052
(associated with the identi\214er)264 194 R 6.052(.I)-.66 G 3.052(tw)
-6.052 G .052(ill be simpler to mak)-3.052 F(e)-.12 E .701
(nodes in all of the symbol tables identical, and null out)264 208 R
(unnecessary \214elds.)264 222 Q 540 227 72 227 DL F2
(attr_bitset attributes;)78 238 Q F3(Symbol attrib)264 238 Q
(utes, as described earlier)-.24 E(.)-.66 E 540 243 72 243 DL F2
(size_t sequence;)78 254 Q F3 -.18(Fo)264 254 S 6.48(rp).18 G 3.48
(arameters and local v)-6.48 F 3.48(ariables, their declaration)-.3 F
.448(sequence number)264 268 R 3.448(,s)-.48 G .448
(tarting from 0, 1, etc.)-3.448 F -.18(Fo)6.448 G 3.448(ra).18 G .448
(ll global)-3.448 F(names, 0.)264 282 Q 540 287 72 287 DL F2
(symbol_table* fields;)78 298 Q F3 3.167(Ap)264 298 S .167
(ointer to the \214eld table if this symbol is a)-3.167 F F2(struct)
3.167 E F3(\(if)3.167 E(the)264 312 Q F2(typeid)3 E F3(attrib)3 E
(ute is present\).)-.24 E(Else null.)6 E 540 317 72 317 DL F2
(location lloc;)78 328 Q F3(Location indicating where this symbol w)264
328 Q(as declared.)-.12 E 540 333 72 333 DL F2(size_t block_nr;)78 344 Q
F3 .084(The block number to which this symbol belongs.)264 344 R(Block)
6.084 E 3.605(0i)264 358 S 3.605(st)-3.605 G .605
(he global block, and positi)-3.605 F .964 -.18(ve i)-.3 H .604
(ncreasing sequential).18 F(numbers are assigned to functions.)264 372 Q
540 377 72 377 DL F2(vector<symbol*>* parameters;)78 388 Q F3 4.837(As)
264 388 S 1.838(ymbol node pointer which points at the parameter)-4.837
F 5.082(list. F)264 402 R 2.081(or a function, points at a v)-.18 F
2.081(ector of parameters.)-.18 F(Else null.)264 416 Q 540 421 72 421 DL
255 169 255 421 DL 540 169 540 421 DL 72 169 72 421 DL 255 169 255 421
DL F0 -.216(Fi)217.5 436 S(gure 2.).216 E(Symbol table node)6.888 E
3.444(3. Symbol)72 468 R(tables)3.444 E F1 1.81
(Symbol tables must be maintained for identi\214ers)72 488 R(,)-.3 E F2
(struct)5.146 E F1 2.41 -.3(s, a)D 1.81(nd for eac).3 F(h)-.084 E F2
(struct)5.146 E F1 5.146(,a)C 1.858(\214eld table)72 502 R 8.53(.F)-.216
G 1.857(igure 2 contains dec)-8.65 F 1.857(larations for type)-.084 F F2
(symbol)5.193 E F1 1.857(in the left column and)5.193 F .009
(descriptions in the right column.)72 516 R 3.345(As)6.681 G .01
(ymbol table is just a hash table with the identi-)-3.345 F
(\214er as the key and a symbol as the value)72 530 Q(:)2 E F2
(using symbol_table = unordered_map<string*,symbol*>;)85.5 544 Q
(using symbol_entry = symbol_table::value_type;)85.5 558 Q F1(Eac)72 572
Q 5.85(he)-.084 G 2.514(ntry in the symbol table is a)-5.85 F F2 2.513
(pair<const string*,symbol*>)5.849 F F1 9.185(.T)C 2.513(he key is a)
-9.185 F .568(pointer into the)72 586 R F2(stringset)3.904 E F1 .568
(as returned by the intern function.)3.904 F .569(This key is the same)
7.24 F
(pointer as found in the AST node of the identi\214er de\214nition.)72
600 Q F0 3.444(3.1 The)72 620 R(structure and \214eld tables)3.444 E F1
.244(All structures and \214elds belong to bloc)72 640 R 3.58(k0\()-.084
G .243(by default\), since no structure de\214nitions)-3.58 F(ma)72 654
Q 4.759(yb)-.12 G 4.759(el)-4.759 G 4.759(ocal. Structure)-4.759 F 1.424
(and \214eld names are in separate namespaces from that of)4.759 F
(identi\214ers)72 668 Q 8.388(.M)-.3 G 1.716(aintain a)-8.388 F F2
(symbol_table)5.052 E F1 1.716(containing all structure de\214nitions)
5.052 F 5.052(,w)-.3 G 1.716(ith the)-5.052 F .029
(type name as the key and a \214eld table as the value)72 682 R 6.702
(.E)-.216 G(ac)-6.702 E 3.366(hs)-.084 G .03
(tructure de\214nition points)-3.366 F(at its own \214eld table)72 696 Q
(.)-.216 E 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(6o)36.96 G 3.336(f8)-3.336 G F0 3.444
(3.2 Symbol)72 74 R(tables for identi\214ers)3.444 E F1 .02
(When handling nested symbol tables)72 94 R 3.356(,i)-.3 G 3.355(ti)
-3.356 G 3.355(sn)-3.355 G .019
(ecessary to ef\214ciently create a new scope)-3.355 F(on entry)72 108 Q
3.336(,l)-1.5 G(ook up symbols quic)-3.336 E(kly in)-.084 E/F2 12
/NewCenturySchlbk-Italic@0 SF(O)3.456 E F1(\(1\) time).12 E(.)-.216 E
2.664(\(a\) Maintain)75.336 128 R(two symbol tables)3.336 E 3.336(,o)-.3
G(ne for global names and one for local names)-3.336 E(.)-.3 E 2.664
(\(b\) Maintain)75.336 148 R 4.245(ag)4.245 G .909(lobal counter)-4.245
F/F3 12/Courier-Elite-Bold@0 SF(next_block)4.245 E F1(whic)4.245 E 4.245
(hi)-.084 G 4.245(si)-4.245 G .909(nitially set to 1 and represents)
-4.245 F(the next bloc)96 162 Q 3.336(kn)-.084 G(umber to be used.)
-3.336 E(Eac)6.672 E 3.336(hf)-.084 G(unction bloc)-3.336 E 3.336(km)
-.084 G(ust be unique)-3.336 E(.)-.216 E 2.664(\(c\) When)76.68 182 R
.138(entering a function, increment)3.474 F F3(next_block)3.474 E F1
.137(and create a new symbol table)3.473 F(.)-.216 E(When lea)96 196 Q
(ving a bloc)-.12 E(k, delete it.)-.084 E 2.664(\(d\) When)75.12 216 R
.65(de\214ning an identi\214er)3.986 F 3.986(,i)-1.2 G .651
(nsert it into the global symbol table if it is global,)-3.986 F(whic)96
230 Q 3.336(hc)-.084 G(an be identi\214ers or functions)-3.336 E 6.672
(.I)-.3 G 3.336(fi)-6.672 G 3.336(ti)-3.336 G 3.336(sd)-3.336 G(ec)
-3.336 E(lared in a function, insert it into)-.084 E
(the local symbol table)96 244 Q 6.672(.P)-.216 G
(arameters are local to the function.)-7.116 E 2.664(\(e\) When)76.008
264 R(searc)4.153 E .817(hing for an identi\214er)-.084 F 4.154(,l)-1.2
G .818(ook \214rst in the local symbol table)-4.154 F 4.154(,a)-.216 G
.818(nd if not)-4.154 F 1.314(found, then searc)96 278 R 4.65(ht)-.084 G
1.314(he global symbol table)-4.65 F 7.985(.L)-.216 G 1.313
(ocal identi\214ers hide more global)-7.985 F(ones)96 292 Q(.)-.3 E F0
3.444(4. T)72 318 R(raversing the abstract syntax tree)-.216 E F1 .005
(Write a function that does a depth-\214rst tra)72 338 R .005
(versal of the abstract syntax tree)-.12 F 6.678(.A)-.216 G 3.342(tt)
-6.678 G(his)-3.342 E 2.775(point, you ma)72 352 R 6.111(ya)-.12 G 2.775
(ssume it is correctly constructed.)-6.111 F 2.774(If not, go bac)9.447
F 6.11(ka)-.084 G 2.774(nd \214x your)-6.11 F(parser)72 366 Q(.)-1.2 E
2.664(\(a\) F)75.336 386 R 1.955(or all nodes not involving dec)-.66 F
(larations)-.084 E 5.291(,p)-.3 G 1.955
(roceed left to right in a depth-\214rst)-5.291 F 1.114(post-order tra)
96 400 R 1.114(versal, assigning attributes as necessary)-.12 F 7.785
(.A)-1.5 G 1.113(ll identi\214ers must be)-7.785 F(dec)96 414 Q .888
(lared before they are used, except when a)-.084 F/F4 9
/NewCenturySchlbk-Italic@0 SF(TYPEID)4.224 E F1(dec)4.224 E .888
(lares a \214eld of a struc-)-.084 F(ture)96 428 Q 3.482(,s)-.216 G
3.482(ot)-3.482 G .146
(he scan must be done from left to right, with all dec)-3.482 F .145
(larations preceding)-.084 F(all references)96 442 Q(.)-.3 E 2.664
(\(b\) Whenever)75.336 462 R 4.874(as)4.874 G 1.538
(tructure de\214nition is found, create a new entry in the structure)
-4.874 F .87(hash, using the typeid as a key)96 476 R 7.542(.T)-1.5 G
.87(he bloc)-7.542 F 4.206(kn)-.084 G .87
(umber is 0 because structures are)-4.206 F(dec)96 490 Q .48
(lared globally)-.084 F 7.153(.T)-1.5 G .481
(hen create a hash table and insert eac)-7.153 F 3.817<688c>-.084 G .481
(eld into that hash)-3.817 F(table)96 504 Q 3.336(,p)-.216 G
(ointed at by this structure table entry)-3.336 E 6.672(.F)-1.5 G
(ield names are also in bloc)-6.792 E 3.336(k0)-.084 G(.)-3.336 E 2.664
(\(c\) The)76.68 524 R .084(structure name must be inserted into the st\
ructure hash before the \214eld ta-)3.42 F
(ble is processed, because type type of a \214eld ma)96 538 Q 3.336(yb)
-.12 G 3.336(et)-3.336 G(he structure itself)-3.336 E(.)-.444 E 2.664
(\(d\) If)75.12 558 R 3.542(as)3.542 G .206(tructure name is found that\
 is not in the hash, insert it with a null pointer)-3.542 F
(for the \214eld table)96 572 Q 6.672(.I)-.216 G 3.336(fi)-6.672 G 3.336
(tl)-3.336 G(ater becomes de\214ned, \214ll in the \214elds)-3.336 E(.)
-.3 E 2.664(\(e\) If)76.008 592 R .312(an incomplete structure has a \
\214eld selected from it, or if it follows)3.648 F F3(new)3.648 E F1
3.648(,o)C 3.648(ri)-3.648 G 3.648(fi)-3.648 G(t)-3.648 E .972
(used in a dec)96 606 R .972
(laration of other than a \214eld, print an error message about refer)
-.084 F(-)-.444 E(ring to an incomplete type)96 620 Q(.)-.216 E 2.664
(\(f\) All)78.012 640 R
(other identi\214ers are inserted into the main symbol tables)3.336 E(.)
-.3 E 2.664(\(g\) Whenever)75.564 660 R .542
(you see a function, increment the global bloc)3.878 F 3.878(kc)-.084 G
3.878(ount. Then)-3.878 F .542(store the)3.878 F(bloc)96 674 Q 4.244(kn)
-.084 G .908(umber in the AST node and tra)-4.244 F .908
(verse the function.)-.12 F(Eac)7.581 E 4.245(hf)-.084 G .909
(unction has a)-4.245 F 2.786(unique number)96 688 R 6.122(,w)-1.2 G
2.786(ith 0 being the global bloc)-6.122 F 2.786
(k, and the others numbered in)-.084 F(sequence 1, 2, 3, etc)96 702 Q(.)
-.216 E 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(7o)36.96 G 3.336(f8)-3.336 G 2.664
(\(h\) Whenever)74.676 74 R .007(you see a function or prototype)3.343 F
3.344(,p)-.216 G .008(erform the bloc)-3.344 F 3.344(ke)-.084 G .008
(ntering operation,)-3.344 F .059(and tra)96 88 R .059
(verse the function.)-.12 F .058
(Treat the function as if it were a bloc)6.731 F 3.394(k. The)-.084 F
(parame-)3.394 E
(ters are inserted into the symbol table as owned by the function')96
102 Q 3.336(sb)-.3 G(loc)-3.336 E(k.)-.084 E 2.664(\(i\) If)78.228 122 R
.089(the function is already in the symbol table)3.424 F 3.425(,b)-.216
G .089(ut only as a prototype)-3.425 F 3.425(,m)-.216 G(atc)-3.425 E
3.425(ht)-.084 G(he)-3.425 E .776
(prototype of the new function with the previous one of the same name)96
136 R 7.447(.I)-.216 G 4.111(ft)-7.447 G(hey)-4.111 E(differ)96 150 Q
4.037(,p)-1.2 G .701(rint an error message)-4.037 F 7.373(.I)-.216 G
4.037(ft)-7.373 G .701(he function is already in the symbol table as)
-4.037 F 3.336(af)96 164 S
(unction, print an error message about a duplicate dec)-3.336 E
(laration.)-.084 E 2.664(\(j\) If)78.456 184 R .356
(the function is not in the symbol table)3.692 F 3.692(,e)-.216 G .356
(nter it, along with its parameters)-3.692 F 7.028(.I)-.3 G(f)-7.028 E
1.378(this is an actual function, tra)96 198 R 1.378(verse the bloc)-.12
F 4.714(ka)-.084 G 4.714(sy)-4.714 G 1.378(ou normally would, with the)
-4.714 F(bloc)96 212 Q 3.714(kn)-.084 G .377
(umber being the next one in line)-3.714 F 7.049(.A)-.216 G .377
(function creates at least two bloc)-3.336 F(ks)-.084 E(,)-.3 E
(one for itself)96 226 Q 3.336(,a)-.444 G(nd one for the bloc)-3.336 E
3.336(ko)-.084 G 3.336(fs)-3.336 G(tatements that it owns)-3.336 E(.)-.3
E 2.664(\(k\) Whenever)74.892 246 R .157(you see a variable dec)3.493 F
.158(laration, look it up in the symbol table)-.084 F 6.83(.P)-.216 G
.158(rint a)-6.83 F 1.597(duplicate dec)96 260 R 1.597
(laration error message if it is a global dec)-.084 F 1.597
(laration and is also in)-.084 F .066(the global symbol table)96 274 R
3.402(,o)-.216 G 3.403(ri)-3.402 G 3.403(fi)-3.403 G 3.403(ti)-3.403 G
3.403(sal)-3.403 G .067(ocal dec)-3.403 F .067
(laration and also in the local symbol)-.084 F(table)96 288 Q 7.123(.A)
-.216 G .451(local dec)-3.336 F .451
(laration that duplicates a global dec)-.084 F .45
(laration is not an error \212)-.084 F(it just hides the global dec)96
302 Q(laration.)-.084 E 2.664(\(l\) In)78.228 322 R 1.303
(the scanner and parser)4.639 F 4.639(,e)-1.2 G 1.303
(rror messages were printed using a global co\366rdi-)-4.639 F 2.41
(nate maintained by the scanner)96 336 R 9.082(.I)-1.2 G 5.746(nt)-9.082
G 2.41(his assignment and the next, all error)-5.746 F 2.581
(messages must be the co\366rdinates in some appropriate AST node)96 350
R 5.917(,s)-.216 G 2.582(ince the)-5.917 F
(global co\366rdinate at this time indicates end of \214le)96 364 Q(.)
-.216 E F0 3.444(5. Generated)72 390 R(output)3.444 E F1 -1.2(Yo)72 410
S 4.611(um)1.2 G 1.275
(ust generate all output from the previous projects)-4.611 F 4.611(,a)
-.3 G 1.274(nd in addition, create a)-4.611 F .157
(\214le with the symbol table in it with a suf\214x of)72 424 R/F2 12
/Courier-Elite-Bold@0 SF(.sym)3.493 E F1 6.829(.I)C 3.493(na)-6.829 G
.157(ddition, additional informa-)-3.493 F .921
(tion will be printed into the)72 438 R F2(.ast)4.257 E F1 .921
(\214le when tra)4.257 F .92(versing and printing the AST)-.12 F 7.592
(.S)-1.5 G(ome)-7.592 E(sample input shown in F)72 452 Q
(igure 3, for whic)-.12 E 3.336(hF)-.084 G
(igure 4 shows some sample output.)-3.456 E 2.664(\(a\) Retro\214t)
75.336 472 R 1.586
(your scanner so that new \214elds are added to a token node when cre-)
4.921 F -1.336(ated :)96 486 R F2 .889(attr_bitset attributes)7.561 F F1
4.225(,i)C .888(nitialized to 0, a bloc)-4.225 F 4.224(kn)-.084 G .888
(umber initialized to 0,)-4.224 F
(and a pointer to a structure table node)96 500 Q 3.336(,i)-.216 G
(nitialized to null,)-3.336 E 2.664(\(b\) Retro\214t)75.336 520 R
(your parser so that its output lines look like)3.336 E(:)2 E F2
('+' "+" \(0.6.3\) {4} int vreg)109.5 534 Q
(IDENT "foo" \(0.6.8\) {4} int variable \(0.2.9\))109.5 548 Q
(IDENT "bar" \(0.7.3\) {5} struct "node" variable \(0.3.7\))109.5 562 Q
F1 -.66(Fo)96 576 S 1.443(llowing the token coordinate is the bloc).66 F
4.779(kn)-.084 G 1.443(umber in whic)-4.779 F 4.779(ht)-.084 G 1.443
(he node occurs)-4.779 F(,)-.3 E 1.091
(and then the various attributes associated with that node)96 590 R
7.763(.F)-.216 G 1.091(or identi\214ers)-8.423 F 4.426(,t)-.3 G(he)
-4.426 E(last number is the coordinate of the dec)96 604 Q(laration.)
-.084 E 2.664(\(c\) In)76.68 624 R .55(the tra)3.886 F .55
(versal described above)-.12 F 3.886(,p)-.216 G .55(ut a bloc)-3.886 F
3.886(kn)-.084 G .551(umber on every node in the tree)-3.886 F(,)-.216 E
1.299(as well as appropriate attributes)96 638 R 7.971(.I)-.3 G 4.635
(ft)-7.971 G(he)-4.635 E F2(struct)4.635 E F1 1.298
(attribute is set, also print the)4.635 F 1.902(name of the structure)96
652 R 8.574(.F)-.216 G 1.902(or variables)-9.234 F 5.239(,f)-.3 G
(unctions)-5.239 E 5.239(,t)-.3 G(ypeids)-5.239 E 5.239(,a)-.3 G 1.903
(nd \214elds)-5.239 F 5.239(,p)-.3 G 1.903(rint out)-5.239 F 1.745
(the co\366rdinates of the de\214ning occurrence of that identi\214er)96
666 R 8.416(.T)-1.2 G 1.744(his means that)-8.416 F 1.532(you AST \214l\
e must be generated after the symbol table semantic routines tra-)96 680
R(verse the AST)96 694 Q(.)-1.5 E 2.664(\(d\) Output)75.12 714 R 1.238
(to the)4.574 F F2(.sym)4.574 E F1 1.238
(\214le should show all identi\214ers)4.574 F 4.574(,t)-.3 G(ypeids)
-4.574 E 4.574(,a)-.3 G 1.237(nd \214elds listed in)-4.574 F
(the same order as on input, i.e)96 728 Q(., sorted by serial number)
-.216 E(.)-1.2 E 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q
(all 2018 \203 Project 4 \203 Symbols and Type Checking)-.888 E/F1 12
/NewCenturySchlbk-Roman@0 SF 3.336(8o)36.96 G 3.336(f8)-3.336 G 2.664
(\(e\) F)76.008 74 R .241(or eac)-.66 F 3.577(hd)-.084 G .242
(e\214nition of a variable)-3.577 F 3.578(,f)-.216 G .242
(unction, structure)-3.578 F 3.578(,o)-.216 G 3.578<728c>-3.578 G .242
(eld, print out the same)-3.578 F .418(information into the)96 88 R/F2
12/Courier-Elite-Bold@0 SF(.sym)3.754 E F1(\214le)3.754 E 7.09(.L)-.216
G .418(ist all global de\214nitions against the left margin)-7.09 F
1.504(and all \214eld, parameter)96 102 R 4.84(,a)-1.2 G 1.504
(nd local de\214nitions indented by three spaces)-4.84 F 8.177(.P)-.3 G
(rint)-8.177 E .771(an empty line in front of eac)96 116 R 4.107(hg)
-.084 G .771(lobal de\214nition and between the parameter list)-4.107 F
(and local variables)96 130 Q(.)-.3 E/F3 12/Courier-Elite@0 SF
(struct node {)96 167.5 Q(int foo;)114 181.5 Q(node link;)114 195.5 Q(})
96 209.5 Q(node func \(node head, int length\) {)96 223.5 Q(int a = 0;)
114 237.5 Q(string b = "";)114 251.5 Q(node c = new node;)114 265.5 Q
(if \(a < 3\) {)114 279.5 Q 6(a=l)132 293.5 S(ength;)-6 E 6(c=c)132
307.5 S(.link;)-6 E(}else {)114 321.5 Q(if \(0 == 0\) a = 8;)132 335.5 Q
(else b = "foo";)174 349.5 Q(})114 363.5 Q(})96 377.5 Q 540 387.5 72
387.5 DL 540 153 540 387.5 DL 72 153 540 153 DL 72 387.5 72 153 DL F0
-.216(Fi)139.05 407.3 S(gure 3.).216 E
(Example program used to illustrate)6.888 E F2(.sym)3.444 E F0(\214le)
3.444 E F3(node \(0.1.7\) {0} struct node)96 450.8 Q
(foo \(0.2.7\) int field 0)114 464.8 Q
(link \(0.3.8\) struct node field 1)114 478.8 Q
(func \(0.5.5\) {0} struct node function)96 506.8 Q
(head \(0.5.16\) {1} struct node variable lval param 0)114 520.8 Q
(length \(0.5.24\) {1} int variable lval param 1)114 534.8 Q 6(a\()114
548.8 S(0.6.7\) {1} int variable lval local 0)-6 E 6(b\()114 562.8 S
(0.7.10\) {1} string variable lval local 1)-6 E 6(c\()114 576.8 S
(0.8.8\) {1} struct node variable lval local 2)-6 E 540 586.8 72 586.8
DL 540 436.3 540 586.8 DL 72 436.3 540 436.3 DL 72 586.8 72 436.3 DL F0
-.216(Fi)151.884 606.6 S(gure 4.).216 E(Sample output to)6.888 E F2
(.sym)3.444 E F0(\214le from F)3.444 E(igure 3)-.216 E 0 Cg EP
%%Trailer
end
%%EOF
