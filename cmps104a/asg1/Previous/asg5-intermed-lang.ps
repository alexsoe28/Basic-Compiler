%!PS-Adobe-3.0
%%Creator: groff version 1.22.2
%%CreationDate: Mon Nov 26 13:03:15 2018
%%Title: asg5-intermed-lang.ps
%%BoundingBox: 0 0 612 792
%%DocumentNeededResources: font Courier
%%+ font Courier-Bold
%%+ font NewCenturySchlbk-Bold
%%+ font NewCenturySchlbk-Roman
%%+ font NewCenturySchlbk-Italic
%%+ font Times-Roman
%%+ font Symbol
%%DocumentSuppliedResources: procset grops 1.22 2
%%+ font Courier-Elite-Bold
%%+ font Courier-Elite
%%Pages: 12
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.22 2
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Courier
%%IncludeResource: font Courier-Bold
%%IncludeResource: font NewCenturySchlbk-Bold
%%IncludeResource: font NewCenturySchlbk-Roman
%%IncludeResource: font NewCenturySchlbk-Italic
%%IncludeResource: font Times-Roman
%%IncludeResource: font Symbol
%%BeginResource: font Courier-Elite-Bold
%%DocumentNeededResources: font Courier-Bold
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Courier-Elite-Bold
[ .833333333 0 0 1 0 0 ]
/Courier-Bold
MakeTransformedFont
%%EndResource
%%BeginResource: font Courier-Elite
%%DocumentNeededResources: font Courier
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Courier-Elite
[ .833333333 0 0 1 0 0 ]
/Courier
MakeTransformedFont
%%EndResource
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE/NewCenturySchlbk-Italic@0 ENC0
/NewCenturySchlbk-Italic RE/Courier-Elite@0 ENC0/Courier-Elite RE
/NewCenturySchlbk-Roman@0 ENC0/NewCenturySchlbk-Roman RE
/Courier-Elite-Bold@0 ENC0/Courier-Elite-Bold RE/NewCenturySchlbk-Bold@0
ENC0/NewCenturySchlbk-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(1o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E/F3 11/Courier-Elite@0 SF
($Id: asg5-intermed-lang.mm,v 1.25 2018-11-16 12:13:20-08 - - $)72 67 Q
(PWD: /afs/cats.ucsc.edu/courses/cmps104a-wm/Assignments)72 80 Q
(URL: http://www2.ucsc.edu/courses/cmps104a-wm/:/Assignments/)72 93 Q F0
3.444(1. Overview)72 117 R F2 1.503(An intermediate language is a very \
low level language used by a compiler to per)72 137 R(-)-.444 E 1.448
(form optimizations and other c)72 151 R 1.449
(hanges before emitting \214nal assembly language for)-.084 F 1.494
(some particular mac)72 165 R(hine)-.084 E 8.166(.I)-.216 G 4.829(tg)
-8.166 G 1.493(enerally matc)-4.829 F 1.493
(hes common assembly language state-)-.084 F(ment semantics)72 179 Q
3.336(,b)-.3 G(ut in a typeful manner)-3.336 E(.)-1.2 E F0(SYNOPSIS)72
199 Q F1(oc)102 213 Q F2([)5.336 E F1(-ly)A F2 5.336(][)C F1(-@)-5.336 E
/F4 12/NewCenturySchlbk-Italic@0 SF(\215ag)3.336 E F2 2(...)2.432 G
8.672(][)-2 G F1(-D)-8.672 E F4(string)3.336 E F2(]).432 E F4(program)
5.336 E F1(.oc).012 E F2 .068
(All of the requirements for all previous projects are inc)72 233 R .069
(luded in this project.)-.084 F -.66(Fo)6.741 G 3.405(ra).66 G(ny)-3.405
E .351(input \214le called)72 247 R F4(program)3.687 E F1(.oc).012 E F2
.35(emit an intermediate language \214le called)3.687 F F4(program)3.686
E F1(.oil)A F2(,)A(whic)72 261 Q 3.336(hc)-.084 G
(an then be compiled into assembly language using)-3.336 E F1(gcc)3.336
E F2(.)A/F5 12/Times-Roman@0 SF(program)90 303 Q/F6 12/Symbol SF<ae>
25.344 E/F7 15/NewCenturySchlbk-Roman@0 SF([)9 E F2(structdef)3 E F7(])3
E F2 2(...)2 G F7([)1 E F2(stringdef)3 E F7(])3 E F2 2(...)2 G F7([)1 E
F2(vardef)3 E F7(])3 E F2 2(...)2 G F7([)1 E F2(function)3 E F7(])3 E F2
2(...)2 G F5(structdef)90 317 Q F6<ae>24.012 E F5(`)9 E F1(struct)A F5
(')A/F8 9/NewCenturySchlbk-Italic@0 SF(TYPEID)3 E F5(`)3 E F1({)A F5(')A
F7([)3 E F2(type)3 E F8(IDENT)3 E F5(`)3 E F1(;)A F5(')A F7(])3 E F2 2
(...)2 G F5(`)1 E F1(})A F5 3('`)C F1(;)-3 E F5(')A(stringdef)90 331 Q
F6<ae>23.34 E F5(`)9 E F1(char*)A F5(')A F8(IDENT)3 E F5(`)3 E F1(=)A F5
(')A F8(STRINGCON)3 E F5(`)3 E F1(;)A F5(')A -.3(va)90 345 S(rdef).3 E
F6<ae>35.652 E F2(type)9 E F8(IDENT)3 E F5(`)3 E F1(;)A F5(')A(function)
90 359 Q F6<ae>26.004 E F2(type)9 E F8(IDENT)3 E F5(`)3 E F1(\()A F5(')A
F2(parameters)3 E F5(`)3 E F1(\))A F5(')A F2(fnbody)3 E F5(fnbody)90 373
Q F6<ae>32.004 E F5(`)9 E F1({)A F5(')A F7([)3 E F2(statement)3 E F7(])3
E F2 2(...)2 G F5(`)1 E F1(})A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(;)A F5
(')A(parameters)90 387 Q F6<ae>13.356 E F2(type)9 E F8(IDENT)3 E F7([)3
E F5(`)3 E F1(,)A F5(')A F2(type)3 E F8(IDENT)3 E F7(])3 E F2 2(...)2 G
F7(|)1 1 M F5(`)3 -1 M F1(void)A F5(')A(statement)90 401 Q F6<ae>20.004
E F8(LABEL)9 E F5(`)3 E F1(:;)A F5(')A F6<ae>156 415 Q F7([)9 E F5(`)3 E
F1(if)A F5 3('`)C F1(\()-3 E F5(')A F7([)3 E F5(`)3 E F1(!)A F5(')A F7
(])3 E F2(operand)3 E F5(`)3 E F1(\))A F5(')A F7(])3 E F5(`)3 E F1(goto)
A F5(')A F8(LABEL)3 E F5(`)3 E F1(;)A F5(')A F6<ae>156 429 Q F5(`)9 E F1
(return)A F5(')A F7([)3 E F2(operand)3 E F7(])3 E F5(`)3 E F1(;)A F5(')A
F6<ae>156 443 Q F7([)9 E F2(type)3 E F7(])3 E F8(IDENT)3 E F5(`)3 E F1
(=)A F5(')A F2(expression)3 E F5(`)3 E F1(;)A F5(')A F6<ae>156 457 Q F5
(`)9 E F1(*)A F5(')A F8(IDENT)A F5(`)3 E F1(=)A F5(')A F2(expression)3 E
F5(`)3 E F1(;)A F5(')A F6<ae>156 471 Q F7([)9 E F2(type)3 E F8(IDENT)3 E
F5(`)3 E F1(=)A F5(')A F7(])3 E F8(IDENT)3 E F5(`)3 E F1(\()A F5(')A F7
([)3 E F2(operand)3 E F7([)3 E F5(`)3 E F1(,)A F5(')A F2(operand)3 E F7
(])3 E F2 2(...)2 G F7(])1 E F5(`)3 E F1(\))A F5 3('`)C F1(;)-3 E F5(')A
-.18(ex)90 485 S(pression).18 E F6<ae>14.856 E F2 -.336
(operand binop operand)9 F F7(|)3 1 M F2 -.336(unop operand)3 -1 N F7(|)
3 1 M F2(selection)3 -1 M F7(|)3 1 M F2(operand)3 -1 M F5(binop)90 499 Q
F6<ae>38.664 E F5(`)9 E F1(+)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(-)A F5
(')A F7(|)3 1 M F5(`)3 -1 M F1(*)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(/)A
F5(')A F7(|)3 1 M F5(`)3 -1 M F1(%)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1
(==)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(!=)A F5(')A F7(|)3 1 M F5(`)3 -1
M F1(<)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(<=)A F5(')A F7(|)3 1 M F5(`)3
-1 M F1(>)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(>=)A F5(')A(unop)90 513 Q
F6<ae>42 E F5(`)9 E F1(+)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(-)A F5(')A
F7(|)3 1 M F5(`)3 -1 M F1(!)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(*)A F5(')
A(selection)90 527 Q F6<ae>23.34 E F5(`)9 E F1(&)A F5(')A F8(IDENT)3 E
F5(`)3 E F1([)A F5(')A F2(operand)3 E F5(`)3 E F1(])A F5(')A F7(|)3 1 M
F5(`)3 -1 M F1(&)A F5(')A F8(IDENT)3 E F5(`)3 E F1(->)A F5(')A F8(IDENT)
3 E F5(operand)90 541 Q F6<ae>27.348 E F8(IDENT)9 E F7(|)3 1 M F8
(INTCON)3 -1 M F7(|)3 1 M F8(CHARCON)3 -1 M F7(|)3 1 M F5(`)3 -1 M F1
(sizeof)A F5 3('`)C F1(\()-3 E F5(')A F2(type)3 E F5(`)3 E F1(\))A F5(')
A(type)90 555 Q F6<ae>45.336 E F5(`)9 E F1(void)A F5(')A F7(|)3 1 M F5
(`)3 -1 M F1(void*)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(char*)A F5(')A F7
(|)3 1 M F5(`)3 -1 M F1(char**)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1
(char***)A F5(')A F6<ae>156 569 Q F5(`)9 E F1(int)A F5(')A F7(|)3 1 M F5
(`)3 -1 M F1(int*)A F5(')A F7(|)3 1 M F5(`)3 -1 M F1(int**)A F5(')A F7
(|)3 1 M F5(`)3 -1 M F1(struct)A F5(')A F8(TYPEID)3 E F5(`)A F1(*)A F5
(')A F6<ae>156 583 Q F5(`)9 E F1(struct)A F5(')A F8(TYPEID)3 E F5(`)A F1
(**)A F5 3('`)C F1(struct)-3 E F5(')A F8(TYPEID)3 E F5(`)A F1(***)A F5
(')A 540 600 72 600 DL 540 278 540 600 DL 72 278 540 278 DL 72 600 72
278 DL F0 -.216(Fi)226.386 619.8 S(gure 1.).216 E(Grammar of)6.888 E F1
(oil)3.444 E 539.99 644.8 72 644.8 DL(int)79.272 655.8 Q F8(IDENT)3.336
E F1(int)171.087 655.8 Q F8(IDENT)3.336 E F1(int[])307.903 655.8 Q F8
(IDENT)3.336 E F1(int*)411.718 655.8 Q F8(IDENT)3.336 E F1(string)79.272
669.8 Q F8(IDENT)3.336 E F1(char*)171.087 669.8 Q F8(IDENT)3.336 E F1
(string[])307.903 669.8 Q F8(IDENT)3.336 E F1(char**)411.718 669.8 Q F8
(IDENT)3.336 E .834(TYPEID IDENT)79.272 683.8 R F1(struct)171.087 683.8
Q F8(TYPEID)3.336 E F1(*)A F8(IDENT)3.336 E(TYPEID)307.903 683.8 Q F1
([])A F8(IDENT)3.336 E F1(struct)411.718 683.8 Q F8(TYPEID)3.336 E F1
(**)A F8(IDENT)3.336 E 539.99 688.8 72 688.8 DL 539.99 644.8 539.99
688.8 DL 296.995 644.8 296.995 688.8 DL 72 644.8 72 688.8 DL F0 -.216
(Fi)178.89 705.8 S(gure 2.).216 E(Type declarations in)6.888 E F1(oc)
3.444 E F0(and)3.444 E F1(oil)3.444 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(2o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E F0 3.444(2. Intermediate)72 74 R(Language)3.444
E F2 .608(The intermediate language c)72 94 R .608
(hosen here looks very muc)-.084 F 3.944(hl)-.084 G .608(ike C)-3.944 F
3.945(,e)-.444 G .609(xcept that, for the)-3.945 F .599(most part, eac)
72 108 R(h)-.084 E F1(oil)3.934 E F2 .598
(statement should be capable of translating into a single assem-)3.934 F
2.272(bly language instruction, or only a few)72 122 R 8.944(.U)-1.5 G
2.272(nlike most assembly languages)-8.944 F(,)-.3 E F1(oil)5.608 E F2
(is)5.608 E .947(typed as to basic data types)72 136 R 4.283(,n)-.3 G
.947(amely c)-4.283 F(har)-.084 E 4.283(,i)-1.2 G .946(nt, and pointer)
-4.283 F 7.618(.T)-1.2 G .946(he size of the int and)-7.618 F 1.124
(pointer types are dependent on the underlying arc)72 150 R(hitecture)
-.084 E 7.796(.T)-.216 G 1.124(he c)-7.796 F 1.124(har type is only)
-.084 F(used in strings)72 164 Q(.)-.3 E .847(The basic grammar of)72
184 R F1(oil)4.183 E F2 .846(is given in F)4.183 F .846
(igure 1, and uses the same metanotation as)-.12 F -.216(wa)72 198 S
4.355(su).216 G 1.019(sed in the de\214nition of)-4.355 F F1(oc)4.355 E
F2 7.691(.F)C 1.019(igure 2 shows the relationship between types in)
-7.811 F F1(oc)72 212 Q F2 1.015
(and the corresponding C-compatible types in)4.351 F F1(oil)4.35 E F2
7.686(.T)C 1.014(he extra types listed in F)-7.686 F(ig-)-.12 E .866
(ure 1 but not in F)72 226 R .867
(igure 2 are used only when the address operator \()-.12 F F1(&)A F2
4.203(\)i)C 4.203(sa)-4.203 G .867(pplied to)-4.203 F .705
(take the address of a \214eld selection, whic)72 240 R 4.04(hi)-.084 G
4.04(st)-4.04 G .704(hen dereferenced when applied.)-4.04 F(The)7.376 E
1.088(intermediate language has two datatypes)72 254 R 7.76(:i)2 G 1.089
(ntegers and pointers)-7.76 F 7.761(.C)-.3 G 1.089(haracters only)-7.761
F(appear in integers and strings)72 268 Q(.)-.3 E F0 3.444(2.1 Program)
72 288 R(and Function Structure)3.444 E F2(An)72 308 Q F1(oil)4.562 E F2
1.226(program is structured in a w)4.562 F 1.466 -.12(ay s)-.216 H 1.225
(imilar to C).12 F 4.561(,e)-.444 G 1.225(xcept that it looks more like)
-4.561 F .517(assembly language)72 322 R 7.189(.A)-.216 G .518
(ll code is either aligned with the left margin or indented by 8)-7.189
F(spaces)72 336 Q(.)-.3 E 2.664(\(a\) Structure)81.336 356 R 2.296
(de\214nitions come \214rst, with the)5.632 F F1(struct)5.632 E F2 2.295
(keyword and c)5.631 F 2.295(losing brace)-.084 F
(left-aligned, and the \214elds indented, as in)102 370 Q(:)2 E F1
(struct foo {)115.5 390 Q(char** foo_string_array;)163.5 404 Q
(struct foo* f_foo_pointer;)163.5 418 Q(};)115.5 432 Q F2 2.664
(\(b\) Then)81.336 452 R 1.194(all string constants are listed in the o\
rder they appear in the program.)4.529 F 1.787(They are unlikely to be \
able to be used as immediate operands in assembly)102 466 R(language)102
480 Q 6.672(.G)-.216 G(lobal dec)-6.672 E
(larations are all left-aligned, as in)-.084 E(:)2 E F1
(char* s1 = "Hello, world!\\n";)115.5 500 Q F2 2.664(\(c\) Then)82.68
520 R .868(all global variable dec)4.204 F .869
(larations that appeared in the program, but with-)-.084 F
(out initialization, because in C)102 534 Q 3.336(,s)-.444 G
(tatic initialization is done at compile time)-3.336 E(.)-.216 E 2.664
(\(d\) F)81.12 554 R(inally)-.12 E 3.499(,f)-1.5 G .163
(unctions are emitted with one parameter per line)-3.499 F 6.834(.T)
-.216 G .162(he function name)-6.834 F 1.87
(and the two braces are left aligned, as are label statements)102 568 R
5.206(,b)-.3 G 1.87(ut everything)-5.206 F(else is indented, as in)102
582 Q(:)2 E F1(int add \()115.5 602 Q(int _1_a,)163.5 616 Q(int _1_b\))
163.5 630 Q({)115.5 644 Q(int i2 = _1_a + _1_b;)163.5 658 Q(return i2;)
163.5 672 Q(})115.5 686 Q 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(3o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E F0 3.444(2.2 Statements)72 74 R F2 .339
(Statements are all indented, except for labels)72 94 R 3.675(,a)-.3 G
.339(nd all dec)-3.675 F .339(larations of local variables)-.084 F 2.486
(must be initialized.)72 108 R 2.487
(Expressions other than calls are restricted to three-address)9.158 F
(instructions)72 122 Q 3.336(,w)-.3 G
(ith a destination and at most two sources)-3.336 E(.)-.3 E 2.664
(\(a\) A)81.336 142 R .381
(label is emitted unindented on a line by itself)3.717 F 7.053(.I)-.444
G 3.717(tc)-7.053 G .38(onsists of a keyword from)-3.717 F
(the source language followed by the coordinates taken from the node)102
156 Q(.)-.216 E F1(while_4_20_9:;)115.5 176 Q F2 2.664(\(b\) A)81.336
196 R F1(goto)5.523 E F2 2.187(statement ma)5.523 F 5.523(yb)-.12 G
5.523(ec)-5.523 G 2.187
(onditional or unconditional, and if conditional is)-5.523 F
(preceded by an)102 210 Q F1(if)3.336 E F2
(and an operand \(possibly complemented\) in parentheses)3.336 E(.)-.3 E
F1(goto while_4_20_9;)163.5 230 Q(if \(!b36\) goto while_4_29_9;)163.5
244 Q F2 2.664(\(c\) A)82.68 264 R F1(return)6.899 E F2 3.563
(statement ma)6.899 F 6.899(yo)-.12 G 6.899(rm)-6.899 G 3.803 -.12(ay n)
-6.899 H 3.563(ot ha).12 F 3.563(ve an operand, depending on the)-.12 F
(requirements of the original)102 278 Q F1(oc)3.336 E F2(program.)3.336
E F1(return _5_foobar;)163.5 298 Q(return;)163.5 312 Q F2 2.664
(\(d\) An)81.12 332 R 3.832
(assignment statement takes an expression as an operand.)7.168 F 7.169
(At)10.505 G 3.833(ype is)-7.169 F
(present if the identi\214er has not previously been dec)102 346 Q
(lared, and absent if it has)-.084 E(.)-.3 E F1(int i5 = _2_n + 45;)
163.5 366 Q(_2_n = i5;)163.5 380 Q(char* a6 = &_3_a[i6];)163.5 394 Q
(*a6 = i7)163.5 408 Q F2 2.664(\(e\) A)82.008 428 R .227
(function call ma)3.563 F 3.562(yo)-.12 G .226(nly ha)-3.562 F .226
(ve operands in parentheses)-.12 F 3.562(,b)-.3 G .226(ut ma)-3.562 F
3.562(yh)-.12 G -.12(av)-3.562 G 3.562(ea).12 G 3.562(sm)-3.562 G(any)
-3.562 E .492(as appropriate)102 442 R 7.165(.A)-.216 G .493
(void function has no assignment on the left.)-3.336 F .493
(All other func-)7.165 F(tions must ha)102 456 Q
(ve it, and the result is placed into a temporary)-.12 E(.)-1.5 E F0
3.444(2.3 Expressions)72 476 R F2
(Expressions are simple and restricted to three-address code)72 496 Q(.)
-.216 E 2.664(\(a\) Binary)81.336 516 R 1.354
(operators are the same as they are in)4.69 F F1(oc)4.689 E F2 1.353
(and ha)4.689 F 1.353(ve already been type)-.12 F -.084(ch)102 530 S(ec)
.084 E 5.309(ked. As)-.084 F 1.973(in C)5.309 F 5.309(,0m)-.444 G 1.974
(eans false and anything else means true)-5.309 F 8.646(.T)-.216 G 1.974
(he unary)-8.646 F(operators are also the same)102 544 Q(.)-.216 E 2.664
(\(b\) Address)81.336 564 R 1.794
(computation for indexing and \214eld selection is taken care of by the)
5.13 F(bac)102 578 Q 4.946(ke)-.084 G 1.61(nd, alghough a type c)-4.946
F(hec)-.084 E 1.61(ker would normally assign offsets of \214elds in)
-.084 F
(structures and offsets of local variables from the frame pointer)102
592 Q(.)-1.2 E 2.664(\(i\) The)114.228 612 R .209
(type of a subscript address is the same as the type of the arra)3.545 F
6.544 -1.5(y. S)-.12 H 3.544(oi)1.5 G(f)-3.544 E(we ha)132 626 Q(ve)-.12
E F1(char** _3_a)3.336 E F2 3.336(,t)C
(hen a subscripting operation might be)-3.336 E(:)2 E F1
(char** a5 = &_3_a[_3_i];)145.5 640 Q F2(and when it is used,)132 654 Q
F1(a5)3.336 E F2(must be dereferenced, as in)3.336 E(:)2 E F1
(_3_n = *a5;)145.5 668 Q(*a5 = _3_n;)145.5 682 Q F2
(depending on whether the dereference is an lvalue or an rvalue)132 696
Q(.)-.216 E 2.664(\(ii\) The)110.448 716 R .379
(type of a selection has one more level of pointer than the dec)3.715 F
(laration)-.084 E 1.282(of a \214eld.)132 730 R 1.282(So if a)7.954 F F1
(struct)4.618 E F2 1.281(has a \214eld)4.617 F F1 1.281(char** foo_bar;)
4.617 F F2 4.617(,t)C 1.281(hen the selection)-4.617 F(might be)132 744
Q(:)2 E 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(4o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E F1(char*** a9 = &_3_ptr->foo_bar;)145.5 74 Q F2
2.664(\(c\) F)82.68 94 R .545(igure 2 show the types in)-.12 F F1(oc)
3.881 E F2 .545(and their corresponding types in)3.881 F F1(oil)3.881 E
F2 7.218(.N)C .546(ote that)-7.218 F .583(the asterisk representing a p\
ointer cuddles up against the following identi\214er)102 108 R(,)-1.2 E
(not against the type)102 122 Q(.)-.216 E 539.999 141 72 141 DL/F3 12
/Times-Roman@0 SF(Cate)82.093 152 Q 65.127(gory F)-.18 F(ormat string)
-.18 E -.18(Fo)43.455 G(rmat ar).18 E 77.331(guments Example)-.216 F
539.999 157 72 157 DL(Global names)82.093 168 Q F1("%s")45.615 E F3
(identi\214er)84.279 E F1(global_var)124.263 E F3(Local names)82.093 182
Q F1("_%d_%s")50.955 E F3(block, identi\214er)60.279 E F1(_3_ix)91.599 E
F3(Stmt labels)82.093 196 Q F1("%s_%d_%d_%d")58.263 E F3 -.12(ke)30.279
G(yw)-.06 E(ord, \214le, line, of)-.12 E(fset)-.3 E F1(if_4_21_9)47.667
E F3(Structure typeids)82.093 210 Q F1("%s")30.279 E F3
(structure_typeid)84.279 E F1(foo)89.607 E F3(Field names)82.093 224 Q
F1("%s_%s")53.607 E F3(structure_typeid, \214eld_name)66.279 E F1
(foo_bar)30.279 E F3 -.72(Vi)82.093 238 S(rtual re).72 E(gisters)-.18 E
F1("%c%d")35.187 E F3(re)72.279 E(gister_cate)-.18 E(gory)-.18 E 3(,n)
-.78 G(umber)-3 E F1(i67)42.771 E 539.999 243 72 243 DL 539.999 141
539.999 243 DL 72 141 72 243 DL F0 -.216(Fi)187.338 258 S(gure 3.).216 E
(Summary of name mangling)6.888 E 3.444(2.4 Name)72 292 R(Mangling)3.444
E F2 .677
(Assembly language generally uses a completely \215at symbol table)72
312 R 4.013(,s)-.216 G 4.013(on)-4.013 G .677(ames need to)-4.013 F
1.498(be mangled in order to a)72 326 R 1.497(void c)-.12 F 1.497
(lashing global names with various local scopes and)-.084 F 1.344
(the C library to whic)72 340 R 4.68(hap)-.084 G 1.344
(rogram is linked.)-4.68 F -.12(Fi)8.016 G 1.344(gure 3 shows the).12 F
F1(fprintf)4.68 E F2 1.344(\(3\) format)B
(items and arguments to be used to mangle a name)72 354 Q(.)-.216 E
2.664(\(a\) All)81.336 374 R .352(structure names)3.688 F 3.688(,f)-.3 G
.351(unction names)-3.688 F 3.687(,a)-.3 G .351
(nd global variables will be presented as)-3.687 F(is)102 388 Q 3.336
(,`)-.3 G(`)-3.636 E F1(foo)A F2 -.3('')C 6.672(.G).3 G
(lobal names belong to bloc)-6.672 E 3.336(k0)-.084 G(.)-3.336 E 2.664
(\(b\) Local)81.336 408 R .298
(names will be pre\214xed with an underscore with a bloc)3.634 F 3.634
(kn)-.084 G .298(umber between)-3.634 F 1.076(the underscores)102 422 R
4.412(,a)-.3 G 4.412(si)-4.412 G 4.412(n`)-4.412 G(`)-4.712 E F1(_1_n)A
F2 -.3('')C 7.748(.L).3 G 1.076(ocal names belong to bloc)-7.748 F 1.076
(ks whose number is)-.084 F(greater than 0.)102 436 Q 2.664
(\(c\) Statement)82.68 456 R 1.588
(labels are emitted with a keyword from the language followed by)4.924 F
1.9(the \214le number)102 470 R 5.236(,l)-1.2 G 1.9(ine number)-5.236 F
5.236(,a)-1.2 G 1.9(nd offset from the token.)-5.236 F 1.9
(The following key-)8.572 F .667(words are used)102 484 R 7.339(:`)2 G
(`)-7.639 E F1(while)A F2 -.3('')C 4.003(,b).3 G .667
(efore a while expression)-4.003 F 7.339(;`)2 G(`)-7.639 E F1(break)A F2
-.3('')C 4.004(,t).3 G .668(he statement to)-4.004 F .692
(transfer to for a false test)102 498 R 7.364(;`)2 G(`)-7.664 E F1(else)
A F2 -.3('')C 4.028(,t).3 G 4.028(ob)-4.028 G(ranc)-4.028 E 4.028(ht)
-.084 G 4.028(oi)-4.028 G 4.028(ft)-4.028 G .691
(he if-test is false and there)-4.028 F(is an)102 512 Q F1(else)3.336 E
F2 6.672(;a)2 G(nd `)-6.672 E(`)-.3 E F1(fi)A F2 -.3('')C 3.336(,t).3 G
3.336(os)-3.336 G(kip the else part.)-3.336 E 2.664(\(d\) F)81.12 532 R
.497(ield names are pre\214xed with the name of the structure to whic)
-.12 F 3.834(ht)-.084 G .498(hey belong)-3.834 F(.)-.3 E
(So a \214eld from)102 546 Q F1(struct foo { int ix; };)3.336 E F2
(would be called)6.672 E F1(foo_ix)3.336 E F2(.)A 2.664(\(e\) V)82.008
566 R .487(irtual registers are just assigned numbers in sequence throu\
ghout the entire)-.216 F 2.374(program starting with 1, 2, 3, etc)102
580 R 9.046(.T)-.216 G 2.375(he letter used is)-9.046 F F1(i)5.711 E F2
2.375(for an)5.711 F F1(int)5.711 E F2(,)A F1(s)5.711 E F2 2.375(for a)
5.711 F/F4 9/NewCenturySchlbk-Italic@0 SF(STRINGCON)102 594 Q F2
(address)4.691 E(,)-.3 E F1(p)4.691 E F2 1.354
(for a direct data pointer)4.69 F 4.69(,a)-1.2 G(nd)-4.69 E F1(a)4.69 E
F2 1.354(for an indirect \(derefer)4.69 F(-)-.444 E
(enceable\) address pointing at data.)102 608 Q(E.g)6.672 E(.,)-.3 E F1
(i2)3.336 E F2(,)A F1(s3)3.336 E F2(,)A F1(p4)3.336 E F2(,)A F1(a5)3.336
E F2(.)A 2.664(\(f\) Indirect)84.012 628 R .155
(addresses are the result of evaluating selections)3.49 F 3.491(,w)-.3 G
(hic)-3.491 E 3.491(hm)-.084 G .155(ust be deref-)-3.491 F
(erenced when used.)102 642 Q(All other addresses are used directly)
6.672 E(.)-1.5 E F1(int* a6 = &_3_array[_3_i];)163.5 662 Q
(char** a8 = &_3_foo->f_foo_bar;)163.5 676 Q F0 3.444(3. Code)72 702 R
(Emission)3.444 E F2 2.084(Code is emitted from the AST with the bene\
\214t of the the symbol table and type)72 722 R -.084(ch)72 736 S(ec)
.084 E(ker)-.084 E 8.02(.S)-1.2 G 1.348(ince the suf\214x)-8.02 F F1
(oil)4.685 E F2 1.349(is not recognized by)4.685 F F1(gcc)4.685 E F2
4.685(,i)C 4.685(no)-4.685 G 1.349(rder to make it compile)-4.685 F 0 Cg
EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(5o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E/F3 12/Courier-Elite@0 SF 12(1#)108 102 S
(!/bin/sh -x)-12 E 12(2#)108 116 S
($Id: ocl,v 1.3 2012-11-16 20:57:44-08 - - $)-6 E 12(3f)108 130 S
(or file in $*)-12 E 12(4d)108 144 S(o)-12 E 30(5g)108 158 S
(cc -g -o $file -x c $file.oil oclib.c)-30 E 12(6d)108 172 S(one)-12 E
540 189 72 189 DL 540 77 540 189 DL 72 77 540 77 DL 72 189 72 77 DL F0
-.216(Fi)226.944 208.8 S(gure 4.).216 E F1(oil-examples/ocl)6.888 E F2
.183(the code)72 228.8 R 3.519(,t)-.216 G(he)-3.519 E F1(-x)3.519 E F2
.183(option must be used.)3.519 F -.12(Fi)6.855 G .183
(gure 4 shows a shell script that will compile).12 F(into an executable)
72 242.8 Q 3.336(,g)-.216 G(iven the name of the executable)-3.336 E(.)
-.216 E(The \214le)72 262.8 Q F1(oclib.h)3.336 E F2
(is bilingual for both)3.336 E F1(oc)3.336 E F2(and)3.336 E F1(gcc)3.336
E F2(.)A 2.664(\(a\) F)81.336 282.8 R
(igure 5 shows the bilingual source \214le)-.12 E(.)-.216 E 2.664
(\(b\) F)81.336 302.8 R 1.16(igure 6 show the \214le preprocessed for)
-.12 F F1(oc)4.497 E F2 4.497(,a)C 4.497(sw)-4.497 G 1.161
(ill be seen by the)-4.497 F F1(oc)4.497 E F2(compiler)4.497 E 1.388
(when inc)102 316.8 R 1.388(luded in an)-.084 F F1(oc)4.724 E F2 4.723
(program. Note)4.724 F 1.387(that the)4.723 F F1(#define)4.723 E F2(s)A
F1(EOF)4.723 E F2(and)4.723 E F1(assert)4.723 E F2(are)4.723 E .722
(not shown in the preprocessed \214gures)102 330.8 R 4.059(,b)-.3 G .723
(ut will be used by the preprocessor to)-4.059 F(process an)102 344.8 Q
F1(oc)3.336 E F2(program.)3.336 E 2.664(\(c\) F)82.68 364.8 R 1.242
(igure 7 shows it preprocessed for)-.12 F F1(gcc)4.577 E F2 4.577(,w)C
1.241(ith names mangled names correctly)-4.577 F(when)102 378.8 Q F1
(__OCLIB_C__)3.336 E F2(is de\214ned, as is done when inc)3.336 E
(luded from)-.084 E F1(oclib.c)3.336 E F2(.)A -.12(Fi)72 398.8 S
(gures 8 and 9 show the code for).12 E F1(oclib.c)3.336 E F2 3.336(,t)C
(he library written in C)-3.336 E(.)-.444 E F0 3.444(3.1 T)72 418.8 R
(op Level Description)-.888 E F2 -.12(Fi)72 438.8 S 1.353
(rst, a prolog is emitted, then the c).12 F 1.353
(hildren of the root are tra)-.084 F 1.353(versed in their own)-.12 F
(sequence to build the various parts of the program.)72 452.8 Q 2.664
(\(a\) Then)81.336 472.8 R 2.341(all structure de\214nitions are tra)
5.678 F 2.341(versed and output as described above)-.12 F(,)-.216 E
(with names mangled, and \214elds properly indented.)102 486.8 Q 2.664
(\(b\) Next,)81.336 506.8 R .049
(all string constants are given names as described above)3.385 F 6.721
(.T)-.216 G .049(his should not)-6.721 F 1.02
(require a complete tree tra)102 520.8 R 4.356(versal. Retro\214t)-.12 F
1.02(either the construction of the AST)4.356 F(or the type c)102 534.8
Q(hec)-.084 E(king module to put all)-.084 E/F4 9
/NewCenturySchlbk-Italic@0 SF(STRINGCON)3.336 E F2
(AST nodes into a queue)3.336 E(.)-.216 E 2.664(\(c\) Then)82.68 554.8 R
.247(all global variables)3.583 F 3.583(,i)-.3 G .247(mmediate c)-3.583
F .247(hildren of the root, and output, with any)-.084 F .763
(initializen given.)102 568.8 R .762
(Initialization must be simple as per the grammar in project)7.435 F(3.)
102 582.8 Q 2.664(\(d\) Then)81.12 602.8 R
(all functions are output, as described below)3.336 E(.)-1.5 E F0 3.444
(3.2 Emitting)72 622.8 R(Functions and Statements)3.444 E F2 1.403(Func\
tion emission is done by a complete depth-\214rst mostly post-order tra)
72 642.8 R 1.403(versal of)-.12 F 1.14(the AST for that function.)72
656.8 R 1.139(Prototypes need not be emitted.)7.811 F 1.139
(They are used only in)7.811 F(type c)72 670.8 Q(hec)-.084 E(king)-.084
E(.)-.3 E 2.664(\(a\) Output)81.336 690.8 R 3.69(the function')7.026 F
7.026(sr)-.3 G 3.691(eturn type)-7.026 F 7.027(,n)-.216 G(ame)-7.027 E
7.027(,a)-.216 G 3.691(nd mangled parameter names)-7.027 F(.)-.3 E
(Mangle the parameter names using the bloc)102 704.8 Q 3.336(kn)-.084 G
(umber the function created.)-3.336 E 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(6o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E 2.664(\(b\) F)81.336 74 R
(ollowing that, indented, are the dec)-.66 E
(larations of all of the parameters)-.084 E(.)-.3 E 2.664(\(c\) An)82.68
94 R .278(opening brace)3.614 F 3.614(,u)-.216 G .278
(nindented, at the start of the function')-3.614 F 3.614(sb)-.3 G(ody)
-3.614 E 3.614(,a)-1.5 G .277(nd a c)-3.614 F(losing)-.084 E(brace)102
108 Q 3.336(,u)-.216 G(nindented, after the function is \214nished.)
-3.336 E 2.664(\(d\) A)81.12 128 R(bloc)3.336 E 3.336(ks)-.084 G
(imply has its c)-3.336 E(hildren tra)-.084 E(versed.)-.12 E 2.664
(\(e\) A)82.008 148 R F1(while)4.405 E F2 1.069(has two c)4.405 F 4.406
(hildren. F)-.084 F 1.07(or the)-.66 F F1(while)4.406 E F2(and)4.406 E
F1(break)4.406 E F2(labels)4.406 E 4.406(,b)-.3 G 1.07
(oth use the serial)-4.406 F(number of the)102 162 Q F1(while)3.336 E F2
(token.)3.336 E 2.664(\(i\) Emit)114.228 176 R(:)2 E F1
(while_%d_%d_%d:;)6.672 E F2(unindented.)6.672 E 2.664(\(ii\) Emit)
110.448 190 R(the \214rst c)3.336 E(hild, unless it is an operand.)-.084
E 2.664(\(iii\) Emit)106.668 204 R(:)2 E F1(if \(!)6.672 E/F3 12
/NewCenturySchlbk-Italic@0 SF(operand).576 E F1 6(\)g).288 G
(oto break_%d_%d_%d;)-6 E F2 2.664(\(iv\) Emit)107.784 218 R
(the statement.)3.336 E 2.664(\(v\) Emit)111.564 232 R(:)2 E F1
(goto while_%d_%d_%d;)6.672 E F2 2.664(\(vi\) Emit)107.784 246 R(:)2 E
F1(break_%d_%d_%d:;)6.672 E F2(unindented.)6.672 E 2.664(\(f\) F)84.012
266 R(or an)-.66 E F1(if)3.336 E F2(-)A F1(else)A F2
(statement, do the following)3.336 E(:)2 E 2.664(\(i\) Emit)114.228 280
R(the \214rst expression, unless it is an operand.)3.336 E 2.664
(\(ii\) Emit)110.448 294 R(:)2 E F1(if \(!)6.672 E F2(operand)A F1 6
(\)g)C(oto else_%d_%d_%d;)-6 E F2 2.664(\(iii\) Emit)106.668 308 R
(the second c)3.336 E(hild \(consequent statement\).)-.084 E 2.664
(\(iv\) Emit)107.784 322 R(:)2 E F1(goto fi_%d_%d_%d;)6.672 E F2 2.664
(\(v\) Emit)111.564 336 R(:)2 E F1(else_%d_%d_%d:;)6.672 E F2
(unindented.)6.672 E 2.664(\(vi\) Emit)107.784 350 R(the third c)3.336 E
(hild \(alternate statement\).)-.084 E 2.664(\(vii\) Emit)104.004 364 R
F1(fi_%d_%d_%d:;)3.336 E F2(unindented.)6.672 E 2.664(\(g\) F)81.564 384
R(or an)-.66 E F1(if)3.336 E F2(with no)3.336 E F1(else)3.336 E F2 3.336
(,d)C 3.336(ot)-3.336 G(he following)-3.336 E(:)2 E 2.664(\(i\) Emit)
114.228 398 R(the \214rst expression, unless it is an operand.)3.336 E
2.664(\(ii\) Emit)110.448 412 R(:)2 E F1(if \(!)6.672 E F2(operand)A F1
6(\)g)C(oto fi_%d_%d_%d;)-6 E F2 2.664(\(iii\) Emit)106.668 426 R
(the second c)3.336 E(hild \(consequent statement\).)-.084 E 2.664
(\(iv\) Emit)107.784 440 R F1(fi_%d_%d_%d:;)3.336 E F2(unindented.)6.672
E 2.664(\(h\) If)80.676 460 R(a)4.751 E F1(return)4.751 E F2 1.414
(statement has an expression, emit the expression, unless it is an)4.75
F(operand, then return the operand.)102 474 Q(If not, just)6.672 E F1
(return)3.336 E F2(.)A F0 3.444(3.3 Emitting)72 494 R(Expressions)3.444
E F2 .466(Expressions are alw)72 514 R -.12(ay)-.216 G 3.803(se).12 G
.467(mitted using a strict depth-\214rst post-order tra)-3.803 F .467
(versal, accu-)-.12 F .023(mulating values into virtual registers)72 528
R 6.695(.T)-.3 G .023(his results in some redundant virtual regis-)
-6.695 F(ters)72 542 Q 3.36(,b)-.3 G .024(ut the bac)-3.36 F 3.361(ke)
-.084 G .025
(nd can use copy propagation to remove them during register allo-)-3.361
F(cation.)72 556 Q 2.664(\(a\) In)81.336 576 R(eac)4.954 E 4.954(hc)
-.084 G 1.617(ase of generating code into an operand, generate a dec)
-4.954 F 1.617(laration of a)-.084 F .297
(virtual register with the appropriate letter)102 590 R(,)-1.2 E F1(i)
3.633 E F2(,)A F1(s)3.634 E F2(,)A F1(a)3.634 E F2 3.634(,o)C(r)-3.634 E
F1(p)3.634 E F2 3.634(,a)C .298(nd assign it the value)-3.634 F
(of the expression thus evaluated.)102 604 Q 2.664(\(b\) The)81.336 624
R 1.249(binary operators are the same in both)4.585 F F1(oc)4.585 E F2
(and)4.585 E F1(oil)4.585 E F2 4.585(,a)C 1.248(nd after emitting an)
-4.585 F 3.513
(instruction, record the register number in the AST node itself)102 638
R 10.185(.T)-.444 G 3.513(his will)-10.185 F 4.467
(require adding yet another \214eld.)102 652 R(Similarly)11.139 E 7.803
(,h)-1.5 G 4.466(andle the unary operators)-7.803 F(.)-.3 E -1.336
(Example :)102 666 R F1(int i5 = _3_n + 1;)115.5 680 Q F2 2.664
(\(c\) An)82.68 700 R .661(allocator uses a call to)3.996 F F1
(xcalloc\(\))3.997 E F2 .661(to allocate the storage)3.997 F 3.997(,b)
-.216 G .661(ased on the type)-3.997 F(of allocator)102 714 Q 3.336(,f)
-1.2 G(or some structure type)-3.336 E F3(T)3.336 E F2
(and pointer number)3.336 E F3(i)3.336 E F2(:)2 E 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(7o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E 2.664(\(i\) `)114.228 74 R F1(new)A F2(')A/F3 9
/NewCenturySchlbk-Italic@0 SF(TYPEID)3.336 E F2(:)5.336 E -1.336(Emit :)
132 88 R F1(struct)6.672 E/F4 12/NewCenturySchlbk-Italic@0 SF(T)6.12 E
F1 6(*p)1.08 G F4(i)-5.748 E F1 6(=x)6 G(calloc \(1, sizeof \(struct)-6
E F4(T)6.12 E F1(\)\);)1.08 E F2 2.664(\(ii\) `)110.448 108 R F1(new)A
F2 3.336('`)C F1(string)-3.336 E F2 3.336('`)C F1(\()-3.336 E F2 3.336
('e)C(xpression `)-3.336 E F1(\))A F2 5.336(':)C
(Emit the expression, unless it is an operand.)132 122 Q -1.336(Emit :)
132 136 R F1(char* p)6.672 E F4(i).252 E F1 6(=x)6 G(calloc \()-6 E F4
(opnd).576 E F1 6(,s).288 G(izeof \(char\)\);)-6 E F2 2.664(\(iii\) `)
106.668 156 R F1(new)A F2 3.336('b)C(asetype `)-3.336 E F1([)A F2 3.336
('e)C(xpression `)-3.336 E F1(])A F2 5.336(':)C
(Emit the expression, unless it is an operand.)132 170 Q
(Emit one of the following)132 184 Q 3.336(,d)-.3 G(epending on the)
-3.336 E F4(basetype)3.336 E F2(:)2 E<83>148.728 198 Q F1(char* p)6 E F4
(i).252 E F1 6(=x)6 G(calloc \()-6 E F4(opnd).576 E F1 6(,s).288 G
(izeof \(char\)\);)-6 E F2<83>148.728 212 Q F1(int* p)6 E F4(i).252 E F1
6(=x)6 G(calloc \()-6 E F4(opnd).576 E F1 6(,s).288 G(izeof \(int\)\);)
-6 E F2<83>148.728 226 Q F1(char** p)6 E F4(i).252 E F1 6(=x)6 G
(calloc \()-6 E F4(opnd).576 E F1 6(,s).288 G(izeof \(char*\)\);)-6 E F2
<83>148.728 240 Q F1(struct)6 E F4(T)6.12 E F1(** p)1.08 E F4(i).252 E
F1 6(=x)6 G(calloc \()-6 E F4(opnd).576 E F1 6(,s).288 G(izeof \(struct)
-6 E F4(T)6.12 E F1(*\)\);)1.08 E F2 2.664(\(d\) F)81.12 260 R .028
(or a function call, evaluate eac)-.66 F 3.364(ho)-.084 G 3.364(ft)
-3.364 G .028(he arguments into registers)-3.364 F 3.364(,a)-.3 G .028
(nd generate)-3.364 F .357(the call instruction.)102 274 R(A)7.029 E F1
(void)3.693 E F2 .357(function is just called.)3.693 F 3.693(An)7.029 G
(on-)-3.693 E F1(void)A F2 .358(function has its)3.694 F
(result captured into a register)102 288 Q(.)-1.2 E 2.664(\(e\) An)
82.008 308 R F3(INTCON)3.472 E F2(ma)3.472 E 3.472(yb)-.12 G 3.472(ee)
-3.472 G .136(mitted as a decimal, octal, or hexadecimal number)-3.472 F
3.472(,a)-1.2 G 3.471(si)-3.472 G 3.471(nC)-3.471 G(.)-3.915 E(A)102 322
Q F3(CHARCON)4.379 E F2 1.044(is emitted as is)4.379 F 7.716(.T)-.3 G
1.044(he constants)-7.716 F F1(null)4.38 E F2(and)4.38 E F1(false)4.38 E
F2 1.044(are emitted as the)4.38 F(literal)102 336 Q F1(0)3.336 E F2
3.336(,a)C(nd)-3.336 E F1(true)3.336 E F2(is emitted as the literal)
3.336 E F1(1)3.336 E F2(.)A 2.664(\(f\) Constants)84.012 356 R 1.472
(\(except strings\) and variables are never captured in registers)4.809
F 4.808(,b)-.3 G(ut)-4.808 E(instead are used as immediate operands)102
370 Q(.)-.3 E F0 3.444(4. An)72 396 R(Example)3.444 E F2 -.12(Fi)72 416
S .937(gure 10 contains a sample).12 F F1(oc)4.273 E F2 4.273
(program. F)4.273 F .937(igure 11 contains the output \214le gener)-.12
F(-)-.444 E .728(ated from it, except that the code generated from the)
72 430 R F1(#include)4.064 E F2 .727(header \214le has been)4.063 F
5.762(omitted. It)72 444 R 2.426(is assumed that)5.762 F F1(cpp)5.762 E
F2 2.427(here has recognized this \214le as the \214fth \214le in)5.762
F 2.256(sequence and that the header \214le has generated 11 bloc)72 458
R 2.256(ks so that the code pre-)-.084 F(sented is the 12th bloc)72 472
Q(k.)-.084 E 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(8o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E/F3 12/Courier-Elite@0 SF 12(1/)108 102 S 6(/$)
-12 G(Id: oclib.h,v 1.20 2018-11-08 14:39:15-08 - - $)-6 E(2)108 116 Q
12(3#)108 130 S(ifndef __OCLIB_H__)-12 E 12(4#)108 144 S
(define __OCLIB_H__)-12 E(5)108 158 Q 12(6#)108 172 S(ifdef __OCLIB_C__)
-12 E(7)108 186 Q 12(8t)108 200 S(ypedef char* cstring;)-12 E 12(9v)108
214 S(oid* xcalloc \(int nelem, int size\);)-12 E 6(10 void)102 228 R
(putint \(int\);)6 E 6(11 void)102 242 R(putstr \(const cstring\);)6 E 6
(12 cstring)102 256 R(getword \(void\);)6 E 6(13 cstring)102 270 R
(getln \(void\);)6 E 6(14 void)102 284 R(endl\(\);)6 E(15)102 298 Q 6
(16 #else)102 312 R(17)102 326 Q 6(18 #define)102 340 R(EXIT_SUCCESS 0)6
E 6(19 #define)102 354 R(EXIT_FAILURE 1)6 E 6(20 #define)102 368 R
(EOF \(-1\))6 E 6(21 #define)102 382 R(char int)6 E 6(22 #define)102 396
R(bool int)6 E 6(23 #define)102 410 R(true 1)6 E 6(24 #define)102 424 R
(false 0)6 E 6(25 #define)102 438 R(assert\(expr\) { \\)6 E 72(26 if)102
452 R(\(not \(expr\)\) { \\)6 E 90(27 __assert_fail)102 466 R
(\(#expr, __FILE__, __LINE__, __FUNC__\); \\)6 E 72(28 })102 480 R(\\)6
E 54(29 })102 494 R 6(30 void)102 508 R
(__assert_fail \(string expr, string file, int line, string func\);)6 E
6(31 void)102 522 R(putchar \(char c\);)6 E 6(32 void)102 536 R
(putint \(int i\);)6 E 6(33 void)102 550 R(putstr \(string s\);)6 E 6
(34 int)102 564 R(getchar\(\);)6 E 6(35 string)102 578 R(getword\(\);)6
E 6(36 string)102 592 R(getln\(\);)6 E 6(37 void)102 606 R(endl\(\);)6 E
6(38 void)102 620 R(exit \(int status\);)6 E(39)102 634 Q 6(40 #endif)
102 648 R(41)102 662 Q 6(42 #endif)102 676 R(43)102 690 Q 540 707 72 707
DL 540 77 540 707 DL 72 77 540 77 DL 72 707 72 77 DL F0 -.216(Fi)217.944
726.8 S(gure 5.).216 E F1(oc-programs/oclib.h)6.888 E 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF 3.336(9o)43.076 G 3.336
(f1)-3.336 G(2)-3.336 E/F3 12/Courier-Elite@0 SF 12(1#)108 102 S 6(1")-6
G(oc-programs/oclib.h")-6 E 12(2#)108 116 S 6(1")-6 G(<built-in>")-6 E
12(3#)108 130 S 6(1")-6 G(<command-line>")-6 E 12(4#)108 144 S
(31 "<command-line>")-6 E 12(5#)108 158 S 6(1")-6 G
(/usr/include/stdc-predef.h" 1 3 4)-6 E 12(6#)108 172 S
(32 "<command-line>" 2)-6 E 12(7#)108 186 S 6(1")-6 G
(oc-programs/oclib.h")-6 E 12(8#)108 200 S(30 "oc-programs/oclib.h")-6 E
12(9v)108 214 S
(oid __assert_fail \(string expr, string file, int line, string func\);)
-12 E 6(10 void)102 228 R(putchar \(int c\);)6 E 6(11 void)102 242 R
(putint \(int i\);)6 E 6(12 void)102 256 R(putstr \(string s\);)6 E 6
(13 int)102 270 R(getchar\(\);)6 E 6(14 string)102 284 R(getword\(\);)6
E 6(15 string)102 298 R(getln\(\);)6 E 6(16 void)102 312 R(endl\(\);)6 E
6(17 void)102 326 R(exit \(int status\);)6 E 540 343 72 343 DL 540 77
540 343 DL 72 77 540 77 DL 72 343 72 77 DL F0 -.216(Fi)205.944 362.8 S
(gure 6.).216 E F1(cpp oc-programs/oclib.h)6.888 E F3 12(1#)108 410.8 S
6(1")-6 G(oc-programs/oclib.h")-6 E 12(2#)108 424.8 S 6(1")-6 G
(<built-in>")-6 E 12(3#)108 438.8 S 6(1")-6 G(<command-line>")-6 E 12
(4#)108 452.8 S 6(1")-6 G(/usr/include/stdc-predef.h" 1 3 4)-6 E 12(5#)
108 466.8 S 6(1")-6 G(<command-line>" 2)-6 E 12(6#)108 480.8 S 6(1")-6 G
(oc-programs/oclib.h")-6 E 6(14 typedef)102 494.8 R(char* cstring;)6 E 6
(15 void*)102 508.8 R(xcalloc \(int nelem, int size\);)6 E 6(16 void)102
522.8 R(putint \(int\);)6 E 6(17 void)102 536.8 R
(putstr \(const cstring\);)6 E 6(18 cstring)102 550.8 R
(getword \(void\);)6 E 6(19 cstring)102 564.8 R(getln \(void\);)6 E 6
(20 void)102 578.8 R(endl\(\);)6 E 540 595.8 72 595.8 DL 540 385.8 540
595.8 DL 72 385.8 540 385.8 DL 72 595.8 72 385.8 DL F0 -.216(Fi)163.944
615.6 S(gure 7.).216 E F1(cpp -D__OCLIB_C__ oc-programs/oclib.h)6.888 E
0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF(10 of 12)36.404 E/F3 12
/Courier-Elite@0 SF 12(1/)108 102 S 6(/$)-12 G
(Id: oclib.c,v 1.96 2018-11-26 13:03:09-08 - - $)-6 E(2)108 116 Q 12(3#)
108 130 S(include <assert.h>)-12 E 12(4#)108 144 S(include <ctype.h>)-12
E 12(5#)108 158 S(include <stdio.h>)-12 E 12(6#)108 172 S
(include <stdlib.h>)-12 E 12(7#)108 186 S(include <string.h>)-12 E(8)108
200 Q 12(9#)108 214 S(define __OCLIB_C__)-12 E 6(10 #include)102 228 R
("oclib.h")6 E(11)102 242 Q 6(12 typedef)102 256 R
(int \(*ctype_fn\) \(int\);)6 E 6(13 cstring)102 270 R
(scan \(ctype_fn skip_over, ctype_fn stop_at\) {)6 E 24(14 int)102 284 R
(byte = 0;)6 E 24(15 do)102 298 R({)6 E 42(16 byte)102 312 R 6(=g)6 G
(etchar\(\);)-6 E 42(17 if)102 326 R(\(byte == EOF\) return NULL;)6 E 24
(18 })102 340 R(while \(skip_over != NULL && skip_over \(byte\)\);)6 E
24(19 size_t)102 354 R(buf_size = 16;)6 E 24(20 cstring)102 368 R
(buffer = malloc \(buf_size\);)6 E 24(21 assert)102 382 R
(\(buffer != NULL\);)6 E 24(22 size_t)102 396 R(end_pos = 0;)6 E 24
(23 do)102 410 R({)6 E 42(24 buffer[end_pos++])102 424 R 6(=b)6 G(yte;)
-6 E 42(25 if)102 438 R(\(end_pos >= buf_size\) {)6 E 60(26 buf_size)102
452 R(*= 2;)6 E 60(27 buffer)102 466 R 6(=r)6 G
(ealloc \(buffer, buf_size\);)-6 E 60(28 assert)102 480 R
(\(buffer != NULL\);)6 E 42(29 })102 494 R 42(30 buffer[end_pos])102 508
R 6(=')6 G(\\0';)-6 E 42(31 byte)102 522 R 6(=g)6 G(etchar\(\);)-6 E 24
(32 }while)102 536 R(\(byte != EOF && !stop_at \(byte\)\);)6 E 24
(33 return)102 550 R(buffer;)6 E 6(34 })102 564 R 540 581 72 581 DL 540
77 540 581 DL 72 77 540 77 DL 72 581 72 77 DL F0 -.216(Fi)196.05 600.8 S
(gure 8.).216 E F1(oc-programs/oclib.c)6.888 E F0 3.444(,p)C(art 1)
-3.444 E 0 Cg EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF(11 of 12)36.404 E/F3 12
/Courier-Elite@0 SF 6(35 ^L)102 102 R(36)102 116 Q 6(37 int)102 130 R
(isnl \(int byte\))6 E 6({r)66 G(eturn byte == '\\n'; })-6 E 6(38 void)
102 144 R(putint \(int val\))6 E 6({p)54 G(rintf \("%d", val\); })-6 E 6
(39 void)102 158 R(putstr \(const cstring s\) { printf \("%s", s\); })6
E 6(40 cstring)102 172 R(getword \(void\))6 E 6({r)48 G
(eturn scan \(isspace, isspace\); })-6 E 6(41 cstring)102 186 R
(getln \(void\))6 E 6({r)60 G(eturn scan \(NULL, isnl\); })-6 E 6
(42 void)102 200 R 108(endl\(\) {)6 F(putchar \('\\n'\); })6 E(43)102
214 Q 6(44 void*)102 228 R(xcalloc \(int nelem, int size\) {)6 E 24
(45 void*)102 242 R(result = calloc \(nelem, size\);)6 E 24(46 assert)
102 256 R(\(result != NULL\);)6 E 24(47 return)102 270 R(result;)6 E 6
(48 })102 284 R(49)102 298 Q 540 315 72 315 DL 540 77 540 315 DL 72 77
540 77 DL 72 315 72 77 DL F0 -.216(Fi)196.05 334.8 S(gure 9.).216 E F1
(oc-programs/oclib.c)6.888 E F0 3.444(,p)C(art 2)-3.444 E F3 12(1#)108
382.8 S(include "oclib.h")-12 E 12(2i)108 396.8 S(nt fac \(int n\) {)-12
E 30(3i)108 410.8 S(nt f = 1;)-30 E 30(4w)108 424.8 S(hile \(n > 1\) {)
-30 E 48(5f)108 438.8 S 6(=f*n)-42 G(;)-6 E 48(6n)108 452.8 S 6(=n-1)-42
G(;)-6 E 30(7})108 466.8 S 30(8r)108 480.8 S(eturn f;)-30 E 12(9})108
494.8 S 12(9i)108 508.8 S(nt main\(\) {)-12 E 24(10 int)102 522.8 R 6
(n=1)6 G(;)-6 E 24(11 while)102 536.8 R(\(n <= 5\) {)6 E 42(12 puti)102
550.8 R(\(fac \(n\)\);)6 E 42(13 endl\(\);)102 564.8 R 42(14 n)102 578.8
R 6(=n+1)6 G(;)-6 E 24(15 })102 592.8 R 24(16 return)102 606.8 R(0;)6 E
6(17 })102 620.8 R 540 637.8 72 637.8 DL 540 357.8 540 637.8 DL 72 357.8
540 357.8 DL 72 637.8 72 357.8 DL F0 -.216(Fi)205.716 657.6 S(gure 10.)
.216 E F2(Sample program)6.888 E F1(fac.oc)3.336 E 0 Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
.48 LW 540 54 72 54 DL 540 56 72 56 DL/F0 12/NewCenturySchlbk-Bold@0 SF
(CMPS-104A \203 F)72 50 Q(all 2018 \203 Project 5 \203 Code Emission)
-.888 E(:)2 E/F1 12/Courier-Elite-Bold@0 SF(oc)5.444 E F0(and)3.444 E F1
(oil)3.444 E/F2 12/NewCenturySchlbk-Roman@0 SF(12 of 12)36.404 E/F3 12
/Courier-Elite@0 SF 12(2i)108 102 S(nt fac \()-12 E 60(3i)108 116 S
(nt _12_n\))-60 E 12(4{)108 130 S 60(5i)108 144 S(nt _12_f = 1;)-60 E 12
(6w)108 158 S(hile_5_2_3:;)-12 E 60(7c)108 172 S(har b1 = _12_n > 1;)-60
E 60(8i)108 186 S 6(f\()-60 G(!b1\) goto break_5_2_3;)-6 E 60(9i)108 200
S(nt i1 = _12_f * _12_n;)-60 E 54(10 _12_f)102 214 R 6(=i)6 G(1;)-6 E 54
(11 int)102 228 R(i2 = _12_n - 1;)6 E 54(12 _12_n)102 242 R 6(=i)6 G(2;)
-6 E 54(13 goto)102 256 R(while_5_2_3;)6 E 6(14 break_5_2_3:)102 270 R
54(15 return)102 284 R(_12_f)6 E 6(16 })102 298 R 6(17 int)102 312 R
(main \(void\))6 E 6(18 {)102 326 R 54(19 int)102 340 R(_2_n = 1;)6 E 6
(20 while_5_11_0:;)102 354 R 54(21 char)102 368 R(b2 = __n <= 5;)6 E 54
(22 if)102 382 R(\(!b2\) goto break_5_11_0;)6 E 54(23 int)102 396 R
(i3 = __fac \(__n\);)6 E 54(24 __puti)102 410 R(\(i3\);)6 E 54
(25 __endl\(\);)102 424 R 54(26 int)102 438 R(i4 = __n + 1;)6 E 54
(27 __n)102 452 R 6(=i)6 G(4;)-6 E 54(28 goto)102 466 R(while_5_11_0;)6
E 6(29 break_5_11_0:;)102 480 R 54(29 return)102 494 R(0;)6 E 6(30 })102
508 R 540 525 72 525 DL 540 77 540 525 DL 72 77 540 77 DL 72 525 72 77
DL F0 -.216(Fi)199.5 544.8 S(gure 11.).216 E F1
(Sample generated fac.oil)6.888 E 0 Cg EP
%%Trailer
end
%%EOF
